./app/pos/page.tsx:                              const m = MODIFIERS.find(mod => mod.id === mid);
./app/pos/page.tsx:                                        const m = MODIFIERS.find(mod => mod.id === mid);
./app/pos/page.tsx:                            const m = MODIFIERS.find(mod => mod.id === mid);
./.next/server/chunks/ssr/app_pos_page_tsx_21241096._.js:è¨‚å–®å·²é€å‡ºï¼`),A([])},lang:ag}),(0,b.jsxs)("div",{className:(0,p.clsx)("flex w-full flex-col border-b md:border-b-0 md:border-r border-gray-300 bg-white transition-all duration-300","dashboard"===B?"md:w-full h-full":"md:w-[60%] lg:w-[70%] md:h-full"),style:{height:"dashboard"===B?"100%":O?`${100-J}%`:"100%"},children:[(0,b.jsxs)("div",{className:"flex h-16 w-full items-center justify-between border-b border-gray-200 bg-gray-50 px-4 flex-shrink-0",children:[(0,b.jsxs)("div",{ref:af,className:"flex items-center gap-2 overflow-x-auto scrollbar-hide snap-x snap-mandatory touch-pan-x",children:[(0,b.jsx)("button",{onClick:()=>C("pos"===B?"dashboard":"pos"),className:(0,p.clsx)("flex-shrink-0 rounded-full px-6 py-2 text-lg font-bold transition-all border-2 mb-0 snap-start select-none","dashboard"===B?"bg-purple-600 text-white border-purple-600 shadow-md":"bg-white text-purple-600 border-purple-200 hover:bg-purple-50"),children:"en"===ag?"back to POS":"dashboard"===B?"â¬… å›žé»žé¤":"ðŸ“Š ç®¡ç†å¾Œå°"}),(0,b.jsx)("div",{className:"w-px h-8 bg-gray-300 mx-1 flex-shrink-0 snap-start"}),"pos"===B?(0,b.jsx)(q.Reorder.Group,{axis:"x",values:_,onReorder:aa,className:"flex gap-2",children:_.map(c=>(0,b.jsx)(q.Reorder.Item,{value:c,as:"div",className:"flex-shrink-0 snap-start",children:(0,b.jsx)("button",{onClick:()=>{y(c.id),C("pos")},className:(0,p.clsx)("rounded-full px-6 py-2 text-lg font-bold transition-all select-none","pos"===B&&a===c.id?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"),children:"en"===ag?c.nameEn:c.name})},c.id))}):(0,b.jsxs)("div",{className:"flex bg-gray-200/50 p-1 rounded-full",children:[(0,b.jsx)("button",{onClick:()=>E("report"),className:(0,p.clsx)("px-4 py-1.5 rounded-full text-sm font-bold transition-all","report"===D?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"en"===ag?"Sales Report":"ç‡Ÿæ”¶å ±è¡¨"}),(0,b.jsx)("button",{onClick:()=>E("menu"),className:(0,p.clsx)("px-4 py-1.5 rounded-full text-sm font-bold transition-all","menu"===D?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"en"===ag?"Menu Setup":"èœå–®ç®¡ç†"})]}),"dashboard"===B&&"report"===D&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-px h-8 bg-gray-300 mx-1 flex-shrink-0"}),(0,b.jsxs)("button",{onClick:()=>{aK(null),aI("cogs"),aG(!0)},className:"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-red-200 bg-white text-red-600 hover:bg-red-50 hover:border-red-300 flex items-center gap-1",children:[(0,b.jsx)(l.TrendingDown,{size:16}),"en"===ag?"Purchase":"é€²è²¨"]}),(0,b.jsxs)("button",{onClick:()=>{aK(null),aI("opex"),aG(!0)},className:"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-yellow-200 bg-white text-yellow-600 hover:bg-yellow-50 hover:border-yellow-300 flex items-center gap-1",children:[(0,b.jsx)(m.DollarSign,{size:16}),"en"===ag?"Expense":"è²»ç”¨"]})]})]}),(0,b.jsxs)("button",{onClick:()=>ah("zh"===ag?"en":"zh"),className:"flex flex-shrink-0 items-center gap-1 rounded-full border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium hover:bg-gray-50 text-gray-700 ml-2",children:[(0,b.jsx)(j.Globe,{size:16}),(0,b.jsx)("span",{children:"zh"===ag?"English":"ä¸­æ–‡"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:"dashboard"===B?(0,b.jsx)("div",{className:"max-w-5xl mx-auto",children:"menu"===D?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-gray-400 bg-white rounded-2xl border-2 border-dashed border-gray-200",children:[(0,b.jsx)("p",{className:"font-bold",children:"Please go to /dashboard for Menu Management"}),(0,b.jsx)("p",{className:"text-sm",children:"è«‹å‰å¾€ç®¡ç†å¾Œå°é€²è¡Œèœå–®è¨­å®š"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["en"===ag?"Sales Report":"ç‡Ÿæ”¶å ±è¡¨",(0,b.jsx)("span",{className:"text-base font-normal text-gray-500 ml-3 bg-gray-100 px-3 py-1 rounded-full",children:"en"===ag?`${al.toLocaleDateString()} ~ ${am.toLocaleDateString()}`:`${al.getFullYear()}/${al.getMonth()+1}/${al.getDate()} ~ ${am.getFullYear()}/${am.getMonth()+1}/${am.getDate()}`})]}),(0,b.jsxs)("div",{className:"relative flex flex-col gap-2 items-end",children:[(0,b.jsx)("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:["day","month","quarter","year","custom"].map(a=>(0,b.jsx)("button",{onClick:()=>{U(a),"custom"===a&&W(!0)},className:(0,p.clsx)("px-4 py-1.5 rounded-md text-sm font-medium transition-all",T===a?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-500 hover:bg-gray-50"),children:"en"===ag?"day"===a?"Today":"month"===a?"Month":"quarter"===a?"Quarter":"year"===a?"Year":"Custom":"day"===a?"æœ¬æ—¥":"month"===a?"æœ¬æœˆ":"quarter"===a?"æœ¬å­£":"year"===a?"æœ¬å¹´":"è‡ªé¸"},a))}),"custom"===T&&V&&(0,b.jsxs)("div",{className:"absolute top-10 right-0 z-30 flex flex-col gap-3 bg-white p-4 rounded-xl shadow-xl border border-gray-200 animate-in fade-in zoom-in-95 origin-top-right w-64 md:w-72",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center border-b pb-2 mb-1",children:[(0,b.jsx)("span",{className:"font-bold text-gray-700 text-sm",children:"en"===ag?"Select Range":"é¸æ“‡æ—¥æœŸç¯„åœ"}),(0,b.jsx)("button",{onClick:()=>W(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(o.X,{size:16,className:"text-gray-400"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"date",value:X,onChange:a=>Y(a.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 from-input"}),(0,b.jsx)("span",{className:"text-gray-400",children:"~"}),(0,b.jsx)("input",{type:"date",value:Z,onChange:a=>{$(a.target.value),a.target.value&&W(!1)},className:"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 to-input"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-blue-500 border-gray-100",children:[(0,b.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,b.jsx)(k.TrendingUp,{size:16,className:"text-blue-500"}),"en"===ag?"Revenue":"ç¸½ç‡Ÿæ”¶ (Sales)"]}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:["$",aq]}),(0,b.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[ar," ","en"===ag?"orders":"ç­†è¨‚å–®"]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-red-500 border-gray-100",children:[(0,b.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,b.jsx)(l.TrendingDown,{size:16,className:"text-red-500"}),"en"===ag?"COGS":"é€²è²¨æˆæœ¬ (COGS)"]}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["-$",as]}),(0,b.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[ap.filter(a=>"cogs"===a.type).length," ","en"===ag?"entries":"ç­†ç´€éŒ„"]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-yellow-500 border-gray-100",children:[(0,b.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,b.jsx)(m.DollarSign,{size:16,className:"text-yellow-500"}),"en"===ag?"Expenses":"ç‡Ÿæ¥­è²»ç”¨ (OpEx)"]}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-yellow-600",children:["-$",at]}),(0,b.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[ap.filter(a=>"opex"===a.type).length," ","en"===ag?"items":"ç­†ç´€éŒ„"]})]}),(0,b.jsxs)("div",{className:(0,p.clsx)("p-6 rounded-2xl shadow-md border-l-4 border-gray-100",av>=0?"bg-green-50 border-l-green-500":"bg-red-50 border-l-red-500"),children:[(0,b.jsxs)("p",{className:"text-gray-600 font-bold mb-1 flex items-center gap-1",children:["ðŸŽ‰ ","en"===ag?"Net Profit":"æ·¨åˆ© (Net Profit)"]}),(0,b.jsxs)("p",{className:(0,p.clsx)("text-3xl font-extrabold break-all",av>=0?"text-green-700":"text-red-700"),children:["$",av.toLocaleString()]}),(0,b.jsxs)("p",{className:"text-sm opacity-60 mt-1 font-medium",children:["en"===ag?"Margin":"æ·¨åˆ©çŽ‡",": ",aq>0?Math.round(av/aq*100):0,"%"]})]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(u.default,{orders:ao,expenses:ap,startDate:al,endDate:am,period:T,lang:ag})}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 border-b pb-2 flex justify-between items-center",children:["en"===ag?"Expense History":"æ”¯å‡ºç´€éŒ„æ˜Žç´°",(0,b.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["Total: -$",au]})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:0===ap.length?(0,b.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===ag?"No expenses recorded.":"å°šç„¡æ”¯å‡ºç´€éŒ„"}):ap.sort((a,b)=>b.timestamp-a.timestamp).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:(0,p.clsx)("px-2 py-1 rounded text-xs font-bold uppercase w-16 text-center","cogs"===a.type?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"cogs"===a.type?"COGS":"OpEx"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-gray-800",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:new Date(a.timestamp).toLocaleString("zh"===ag?"zh-TW":"en-US",{hour12:!1})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"font-bold text-gray-700",children:["-$",a.amount]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{aK(a.id),aI(a.type),aG(!0)},className:"p-1.5 rounded-full hover:bg-gray-200 text-gray-500 transition-colors",children:(0,b.jsx)(n.Pencil,{size:18})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void(!confirm("en"===ag?"Delete this expense?":"ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—Žï¼Ÿ")||I(H.filter(a=>a.id!==b)))},className:"p-1.5 rounded-full hover:bg-red-100 text-red-500 transition-colors",children:(0,b.jsx)(e.Trash2,{size:18})})]})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4 border-b pb-2",children:"en"===ag?"Product Sales":"ç†±éŠ·å•†å“çµ±è¨ˆ"}),(0,b.jsx)("div",{className:"space-y-3",children:0===Object.keys(aw).length?(0,b.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===ag?"No sales yet today.":"å°šç„¡éŠ·å”®è³‡æ–™"}):Object.entries(aw).sort(([,a],[,b])=>b-a).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:a}),(0,b.jsxs)("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold",children:["x ",c]})]},a))})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6 border-b pb-2",children:"en"===ag?"Hourly Sales (Peak Times)":"ç†±éŠ·æ™‚æ®µåˆ†æž"}),0===Object.keys(ax).length?(0,b.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===ag?"No sales yet today.":"å°šç„¡æ™‚æ®µè³‡æ–™"}):(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(ax).sort(([a],[b])=>parseInt(a)-parseInt(b)).map(([a,c])=>{let d=parseInt(a),e=`${d}:00 - ${d+1}:00`,f=c.revenue/ay*100,g=Object.entries(c.products).sort(([,a],[,b])=>b-a).slice(0,3);return(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsx)("span",{className:"font-bold text-gray-700 w-32",children:e}),(0,b.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,b.jsxs)("span",{className:"text-blue-600 font-bold",children:["$",c.revenue]}),(0,b.jsxs)("span",{className:"text-gray-500",children:[c.count," ","en"===ag?"orders":"å–®"]})]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2.5 mb-1 overflow-hidden",children:(0,b.jsx)("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${f}%`}})}),(0,b.jsx)("div",{className:"pl-2 border-l-2 border-gray-200 ml-1",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:g.map(([a,c])=>(0,b.jsxs)("span",{className:"text-xs bg-orange-50 text-orange-800 px-2 py-0.5 rounded border border-orange-100",children:[a," ",(0,b.jsxs)("span",{className:"font-bold opacity-70",children:["x",c]})]},a))})})]},d)})})]}),(0,b.jsxs)("div",{className:"text-center pt-8",children:[(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),window.confirm("en"===ag?"Clear all history?":"ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„å—Žï¼Ÿ(ç„¡æ³•å¾©åŽŸ)")&&(localStorage.removeItem("dailyOrders"),localStorage.removeItem("expenses"),G([]),I([]),alert("en"===ag?"Data cleared successfully":"è³‡æ–™å·²å…¨éƒ¨æ¸…é™¤ï¼"))},className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:"en"===ag?"Reset Data":"æ¸…é™¤æ‰€æœ‰è³‡æ–™"}),(0,b.jsx)("button",{type:"button",disabled:M,onClick:async()=>{confirm("en"===ag?"Generate smart profit data?":"ç¢ºå®šè¦ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€æ¸¬è©¦è³‡æ–™å—Žï¼Ÿ\n(é€™æœƒæ¨¡æ“¬çœŸå¯¦ç¶“ç‡Ÿï¼šæˆæœ¬ç´„ä½”ç‡Ÿæ”¶ 35%ï¼Œä¸¦ç”¢ç”Ÿæ¯æœˆå›ºå®šé–‹éŠ·)")&&(N(!0),setTimeout(()=>{let a=[],b=[],c=new Date;for(let d=365;d>=0;d--){let e=new Date(c);e.setDate(e.getDate()-d);let f=e.toLocaleDateString(),g=e.getDate(),h=[0,5,6].includes(e.getDay())?Math.floor(8*Math.random())+5:Math.floor(5*Math.random())+2,i=0;for(let b=0;b<h;b++){let b=Math.floor(3*Math.random())+1,c=[],d=0;for(let a=0;a<b;a++){let a=ab[Math.floor(Math.random()*ab.length)];a&&(c.push({internalId:Math.random().toString().slice(2,8),productId:a.id,name:a.name,nameEn:a.nameEn,basePrice:a.price,modifierIds:[],totalPrice:a.price,type:a.type}),d+=a.price)}a.push({id:Math.random().toString().slice(2,8),items:c,total:d,date:f,timestamp:e.getTime()+1e4*Math.random(),paymentMethod:Math.random()>.4?"cash":"linepay"}),i+=d}if(i>0){let a=Math.floor(i*(.3+.1*Math.random()));b.push({id:Math.random().toString().slice(2,8),type:"cogs",name:`æœ¬æ—¥é£ŸææŽ¡è³¼ (${f})`,amount:a,date:f,timestamp:e.getTime()})}1===g&&b.push({id:Math.random().toString().slice(2,8),type:"opex",name:"åº—é¢ç§Ÿé‡‘",amount:15e3,date:f,timestamp:e.getTime()}),15===g&&b.push({id:Math.random().toString().slice(2,8),type:"opex",name:"æ°´é›»ç“¦æ–¯è²»",amount:3500,date:f,timestamp:e.getTime()})}let d=[...F,...a],e=[...H,...b];G(d),I(e);try{localStorage.setItem("dailyOrders",JSON.stringify(d)),localStorage.setItem("expenses",JSON.stringify(e)),alert("en"===ag?"Success! Smart Profit Data Generated.":"æˆåŠŸï¼å·²ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€è³‡æ–™ ðŸ“ˆ\n\n- è¨‚å–®ï¼šéš¨æ©Ÿåˆ†ä½ˆ (é€±æœ«è¼ƒå¤š)\n- æˆæœ¬ï¼šè‡ªå‹•è¨­ç‚ºç‡Ÿæ”¶çš„ 30%~40%\n- æ”¯å‡ºï¼šæ¯æœˆå›ºå®šç§Ÿé‡‘/æ°´é›»")}catch(a){alert("Storage Quota Exceeded!"),console.error(a)}finally{N(!1)}},50))},className:(0,p.clsx)("text-sm hover:underline ml-4",M?"text-gray-400 cursor-not-allowed":"text-blue-500 hover:text-blue-700"),children:M?"en"===ag?"Generating...":"ç”Ÿæˆä¸­...":"en"===ag?"Generate Profit Data":"ç”Ÿæˆç²åˆ©æ¸¬è©¦è³‡æ–™"})]})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4 md:hidden",children:ab.filter(b=>b.category_id===a).sort((a,b)=>{let c={meat:1,seafood:2,cheese:3,special:4,side:5,addon:6,drink:7};return(c[a.type]||99)-(c[b.type]||99)}).map(a=>(0,b.jsx)(x,{product:a,addToCart:aT,lang:ag},a.id))}),(0,b.jsx)("div",{className:"hidden md:block space-y-8",children:["meat","seafood","cheese","special","side","addon","drink"].map(c=>{let d=ab.filter(b=>b.category_id===a&&b.type===c);return 0===d.length?null:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"grid grid-cols-3 lg:grid-cols-4 gap-4",children:d.map(a=>(0,b.jsx)(x,{product:a,addToCart:aT,lang:ag},a.id))}),(0,b.jsx)("div",{className:"h-px bg-gray-200 w-full"})]},c)})})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col bg-gray-50 transition-all duration-300 w-full md:w-[40%] lg:w-[35%] md:h-full border-t md:border-t-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] md:shadow-none",style:{height:"dashboard"===B?"0px":O?`${J}%`:"100%",display:"dashboard"===B?"none":"flex"},children:[(0,b.jsx)("div",{className:"h-6 w-full bg-white border-t border-gray-200 flex items-center justify-center cursor-grab md:hidden flex-shrink-0 touch-none hover:bg-gray-50 active:bg-gray-100 transition-colors",onTouchStart:a=>{L.current=a.touches[0].clientY},onTouchMove:a=>{if(null===L.current)return;let b=a.touches[0].clientY,c=L.current-b;c>50&&40===J&&(K(70),L.current=null),c<-50&&70===J&&(K(40),L.current=null)},onMouseDown:a=>{Q.current=!0,L.current=a.clientY,document.body.style.cursor="grabbing"},children:(0,b.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,b.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-gray-200 px-4 shadow-sm bg-white flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:ai.cartTitle}),(0,b.jsxs)("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-sm font-bold text-blue-800",children:[z.length," ",ai.items]})]}),(0,b.jsxs)("button",{onClick:()=>aA(!az),className:"flex items-center gap-1 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-200 transition-colors",children:[az?(0,b.jsx)(h.Layers,{size:16}):(0,b.jsx)(i.List,{size:16}),(0,b.jsx)("span",{children:az?ai.grouping:ai.noGrouping})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===z.length?(0,b.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-gray-400 opacity-50",children:[(0,b.jsx)("span",{className:"text-6xl",children:"ðŸ›’"}),(0,b.jsx)("p",{className:"mt-4 text-lg",children:ai.emptyCartTitle})]}):az?aX.map(a=>{let c=aW[a],d=c[0],h=c.length,i=aB.includes(a),j="border-gray-100 hover:border-blue-300",k="bg-white";"meat"===d.type&&(j="border-red-100 hover:border-red-300 text-red-900",k="bg-red-50"),"seafood"===d.type&&(j="border-blue-100 hover:border-blue-300 text-blue-900",k="bg-blue-50"),"cheese"===d.type&&(j="border-yellow-100 hover:border-yellow-300 text-yellow-900",k="bg-yellow-50"),"special"===d.type&&(j="border-purple-100 hover:border-purple-300 text-purple-900",k="bg-purple-50");let l="en"===ag&&d.nameEn||d.name,m=ab.find(a=>a.id===d.productId),n=m?.category_id==="cat_sides"||m?.category_id==="cat_drinks";if(1===h){let a=ab.find(a=>a.id===d.productId),c=a?.category_id==="cat_sides"||a?.category_id==="cat_drinks";return(0,b.jsxs)("div",{onClick:c?void 0:()=>aY(d),className:(0,p.clsx)("group relative flex items-center p-2 shadow-sm border-2 transition-all",!c&&"cursor-pointer",k,j),children:[(0,b.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,b.jsx)("h3",{className:"text-[15px] font-bold leading-tight truncate",children:l}),d.modifierIds.length>0&&(0,b.jsx)("p",{className:"text-sm opacity-80 mt-1 truncate",children:d.modifierIds.map(a=>{let b=MODIFIERS.find(b=>b.id===a);return b?"en"===ag&&b.nameEn||b.name:null}).filter(Boolean).join(", ")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,b.jsx)("div",{className:"w-[28px] flex justify-center"}),(0,b.jsx)("div",{className:"w-[48px] flex justify-center",children:!c&&(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider",children:ai.canCustomize})}),(0,b.jsx)("div",{className:"w-[50px] text-right",children:(0,b.jsxs)("p",{className:"text-md font-medium",children:["$",d.totalPrice]})}),(0,b.jsx)("div",{className:"w-[32px] flex justify-end",children:(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),aV(d.internalId)},className:(0,p.clsx)("flex-shrink-0 rounded-full p-2 transition-colors","text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100"),children:(0,b.jsx)(e.Trash2,{size:24})})})]})]},d.internalId)}return(0,b.jsxs)("div",{className:"rounded-lg shadow-sm overflow-hidden border border-gray-200 bg-white",children:[(0,b.jsxs)("div",{onClick:()=>!n&&void(aB.includes(a)?aC(aB.filter(b=>b!==a)):aC([...aB,a])),className:(0,p.clsx)("flex items-center p-2 transition-colors",!n&&"cursor-pointer",k),children:[(0,b.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center",children:n?(0,b.jsx)("div",{className:"w-[20px]"}):i?(0,b.jsx)(f.ChevronDown,{size:20}):(0,b.jsx)(g.ChevronRight,{size:20})}),(0,b.jsx)("div",{className:"flex-1 min-w-0 pr-2",children:(0,b.jsx)("h3",{className:(0,p.clsx)("text-[15px] font-bold leading-tight truncate",j.split(" ").find(a=>a.startsWith("text-"))||"text-gray-800"),children:l})}),(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,b.jsx)("div",{className:"w-[28px] flex justify-center",children:(0,b.jsxs)("span",{className:"flex-shrink-0 w-8 text-center rounded-full bg-black/80 py-0.5 text-[10px] text-white",children:["x",h]})}),(0,b.jsx)("div",{className:"w-[48px] flex justify-center",children:!n&&(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider",children:ai.canCustomize})}),(0,b.jsx)("div",{className:"w-[50px] text-right",children:(0,b.jsxs)("p",{className:"font-bold text-gray-700",children:["$",c.reduce((a,b)=>a+b.totalPrice,0)]})}),(0,b.jsx)("div",{className:"w-[32px] flex justify-end",children:n?(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),aV(c[c.length-1].internalId)},className:"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors",children:(0,b.jsx)(e.Trash2,{size:24})}):(0,b.jsx)("div",{className:"w-[32px]"})})]})]}),i&&(0,b.jsx)("div",{className:"border-t border-gray-100 bg-gray-50/50 p-2 space-y-2",children:c.map((a,c)=>{let d=ab.find(b=>b.id===a.productId),f=d?.category_id==="cat_sides"||d?.category_id==="cat_drinks",g="en"===ag&&a.nameEn||a.name;return(0,b.jsxs)("div",{onClick:f?void 0:()=>aY(a),className:(0,p.clsx)("flex items-center justify-between rounded-r-md bg-white/50 p-3 shadow-none border-l-[4px] border-gray-100 hover:bg-white ml-6 transition-all",!f&&"cursor-pointer",!f&&j.replace("text-","border-").split(" ")[0]),children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:(0,p.clsx)("font-serif font-bold text-lg opacity-40 w-8 text-center flex-shrink-0"),children:[v(c+1),"."]}),f?(0,b.jsxs)("span",{className:"text-gray-500 font-medium",children:["en"===ag?"Standard":"æ¨™æº–"," (500cc)"]}):(0,b.jsx)("span",{className:(0,p.clsx)("font-medium text-md",a.modifierIds.length>0?"text-gray-800":"text-gray-500"),children:a.modifierIds.length>0?ai.customization:g})]}),f?(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-1 pl-[42px]",children:"en"===ag?"No Add-ons":"ç„¡å®¢è£½åŒ–"}):a.modifierIds.length>0?(0,b.jsx)("p",{className:"text-sm text-blue-600 mt-1 truncate pl-[42px]",children:a.modifierIds.map(a=>{let b=MODIFIERS.find(b=>b.id===a);return b?"en"===ag&&b.nameEn||b.name:""}).join(", ")}):(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-0.5 pl-[42px]",children:ai.noNotes})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:["$",a.totalPrice]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),aV(a.internalId)},className:"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors",children:(0,b.jsx)(e.Trash2,{size:24})})]})]},a.internalId)})})]},a)}):z.map(a=>{let c="bg-white border-gray-100 hover:border-blue-300";"meat"===a.type&&(c="bg-red-50 border-red-100 hover:border-red-300 text-red-900"),"seafood"===a.type&&(c="bg-blue-50 border-blue-100 hover:border-blue-300 text-blue-900"),"cheese"===a.type&&(c="bg-yellow-50 border-yellow-100 hover:border-yellow-300 text-yellow-900"),"special"===a.type&&(c="bg-purple-50 border-purple-100 hover:border-purple-300 text-purple-900");let d=z.filter(b=>b.productId===a.productId),f=d.findIndex(b=>b.internalId===a.internalId),g=d.length>1,h="en"===ag&&a.nameEn||a.name,i=ab.find(b=>b.id===a.productId),j=i?.category_id==="cat_sides"||i?.category_id==="cat_drinks";return(0,b.jsxs)("div",{onClick:()=>aY(a),className:(0,p.clsx)("group relative flex items-center p-2 shadow-sm border-2 transition-all","cursor-pointer",c),children:[(0,b.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,b.jsx)("h3",{className:"text-[15px] font-bold leading-tight truncate",children:h}),a.modifierIds.length>0&&(0,b.jsx)("p",{className:"text-sm opacity-80 mt-1 truncate",children:a.modifierIds.map(a=>{let b=MODIFIERS.find(b=>b.id===a);return b?"en"===ag&&b.nameEn||b.name:null}).filter(Boolean).join(", ")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,b.jsx)("div",{className:"w-[28px] flex justify-center",children:g?(0,b.jsx)("span",{className:"flex-shrink-0 w-[28px] text-center rounded-md bg-black/5 py-0.5 text-[10px] font-bold opacity-80 font-serif",children:v(f+1)}):(0,b.jsx)("div",{className:"w-[28px]"})}),(0,b.jsx)("div",{className:"w-[48px] flex justify-center",children:!j&&(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider whitespace-nowrap",children:ai.canCustomize})}),(0,b.jsx)("div",{className:"w-[50px] text-right",children:(0,b.jsxs)("p",{className:"text-md font-medium",children:["$",a.totalPrice]})}),(0,b.jsx)("div",{className:"w-[32px] flex justify-end",children:(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),aV(a.internalId)},className:(0,p.clsx)("flex-shrink-0 rounded-full p-2 transition-colors","text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100"),children:(0,b.jsx)(e.Trash2,{size:24})})})]})]},a.internalId)})}),(0,b.jsxs)("div",{className:"border-t border-gray-200 bg-white p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] flex-shrink-0 flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col items-start w-24 flex-shrink-0",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:ai.total}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-blue-600 truncate w-full",children:["$",a$]})]}),(0,b.jsx)("button",{onClick:()=>{0!==z.length&&S(!0)},className:"flex-1 rounded-xl bg-blue-600 py-3 text-xl font-bold text-white shadow-lg transition-all hover:bg-blue-700 active:scale-95 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:0===z.length,children:ai.checkout})]})]})]})}a.s(["default",()=>y])}];
./.next/server/chunks/ssr/app_pos_page_tsx_21241096._.js.map:{"version":3,"sources":["../../../../app/pos/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\n// import { MODIFIERS } from '@/lib/mockData'; // Removed\nimport { subscribeToProducts, subscribeToCategories, subscribeToModifiers, Product, Category, Modifier } from '@/lib/services';\nimport { Trash2, ChevronDown, ChevronRight, Layers, List, Globe, TrendingUp, TrendingDown, DollarSign, Pencil, X } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { Reorder } from 'framer-motion';\nimport ModifierModal from '../components/ModifierModal';\nimport AddExpenseModal from '../components/AddExpenseModal';\nimport CheckoutModal from '../components/CheckoutModal';\nimport ProfitChart from '../components/ProfitChart';\n\n// Helper for Roman Numerals\nfunction toRoman(num: number): string {\n  if (num < 1) return \"\";\n  const lookup: { [key: string]: number } = { M: 1000, CM: 900, D: 500, CD: 400, C: 100, XC: 90, L: 50, XL: 40, X: 10, IX: 9, V: 5, IV: 4, I: 1 };\n  let roman = '';\n  for (const i in lookup) {\n    while (num >= lookup[i]) {\n      roman += i;\n      num -= lookup[i];\n    }\n  }\n  return roman;\n}\n\n// Translations\nconst UI_TEXT = {\n  zh: {\n    cartTitle: 'ç›®å‰é»žå–®',\n    items: 'é …',\n    emptyCartTitle: 'å°šæœªé»žé¤',\n    total: 'ç¸½é‡‘é¡',\n    checkout: 'çµå¸³ (Checkout)',\n    grouping: 'å·²åˆä½µ',\n    noGrouping: 'ä¸åˆä½µ',\n    customization: 'å®¢è£½åŒ–å…§å®¹',\n    noNotes: 'ç„¡å‚™è¨»',\n    canCustomize: 'å¯å®¢è£½'\n  },\n  en: {\n    cartTitle: 'Current Order',\n    items: 'items',\n    emptyCartTitle: 'Cart Empty',\n    total: 'Total',\n    checkout: 'Checkout',\n    grouping: 'Grouped',\n    noGrouping: 'List View',\n    customization: 'Customizations',\n    noNotes: 'No notes',\n    canCustomize: 'Customizable'\n  }\n};\n\ntype CartItem = {\n  internalId: string; // unique id for cart item (timestamp)\n  productId: string;\n  name: string;\n  nameEn?: string;\n  basePrice: number;\n  modifierIds: string[];\n  totalPrice: number;\n  type?: string;\n};\n\ntype Order = {\n  id: string; // unique id for order\n  items: CartItem[];\n  total: number;\n  date: string;\n  timestamp: number;\n  paymentMethod: 'cash' | 'linepay';\n};\n\ntype Expense = {\n  id: string;\n  type: 'cogs' | 'opex';\n  name: string;\n  amount: number;\n  date: string;\n  timestamp: number;\n};\n\nconst ProductCard = ({ product, addToCart, lang }: { product: any, addToCart: (p: any) => void, lang: 'zh' | 'en' }) => {\n  let colorClass = 'bg-white border-gray-200 hover:border-blue-400';\n  if (product.type === 'meat') colorClass = 'bg-red-50 border-red-100 hover:bg-red-100 hover:border-red-300 text-red-900';\n  if (product.type === 'seafood') colorClass = 'bg-blue-50 border-blue-100 hover:bg-blue-100 hover:border-blue-300 text-blue-900';\n  if (product.type === 'cheese') colorClass = 'bg-yellow-50 border-yellow-100 hover:bg-yellow-100 hover:border-yellow-300 text-yellow-900';\n  if (product.type === 'special') colorClass = 'bg-purple-50 border-purple-100 hover:bg-purple-100 hover:border-purple-300 text-purple-900';\n  if (product.type === 'side') colorClass = 'bg-gray-50 border-gray-200 hover:bg-gray-100 hover:border-gray-300 text-gray-800';\n  if (product.type === 'addon') colorClass = 'bg-green-50 border-green-100 hover:bg-green-100 hover:border-green-300 text-green-900';\n\n  const hasImage = !!product.image;\n\n  return (\n    <button\n      onClick={() => addToCart(product)}\n      className={clsx(\n        \"relative flex flex-col items-center justify-center gap-1 rounded-xl border p-4 shadow-sm transition-all active:scale-95 active:shadow-inner hover:shadow-md h-32 overflow-hidden\",\n        !hasImage && colorClass,\n        hasImage && \"border-0\"\n      )}\n    >\n      {hasImage && (\n        <>\n          <div\n            className=\"absolute inset-0 bg-cover bg-center z-0\"\n            style={{ backgroundImage: `url(${product.image})` }}\n          />\n          <div className=\"absolute inset-0 bg-black/50 z-10\" />\n        </>\n      )}\n\n      <span className={clsx(\n        \"text-xl font-bold text-center leading-tight z-20\",\n        hasImage && \"text-white shadow-black drop-shadow-md\"\n      )}>\n        {(() => {\n          const rawName = lang === 'en' ? (product.nameEn || product.name) : product.name;\n          // Check for (500cc) or similar size pattern if needed, currently hardcoding for the requested 500cc\n          const sizeMatch = rawName.match(/(.*)(\\(500cc\\))/);\n\n          if (sizeMatch) {\n            return (\n              <span className=\"flex items-center justify-center gap-1 flex-wrap\">\n                <span>{sizeMatch[1].trim()}</span>\n                <span className={clsx(\"text-sm font-normal opacity-90 whitespace-nowrap\", hasImage ? \"text-gray-200\" : \"\")}>{sizeMatch[2]}</span>\n              </span>\n            );\n          }\n          return rawName;\n        })()}\n      </span>\n      <span className={clsx(\n        \"text-lg font-medium opacity-80 z-20\",\n        hasImage && \"text-white\"\n      )}>${product.price}</span>\n    </button>\n  );\n};\n\nexport default function PosPage() {\n  console.log('PosPage Rendered - Fullscreen Fix v2');\n  const [activeCategory, setActiveCategory] = useState('');\n  const [cart, setCart] = useState<CartItem[]>([]);\n\n  // Dashboard State\n  const [viewMode, setViewMode] = useState<'pos' | 'dashboard'>('pos');\n  const [dashboardTab, setDashboardTab] = useState<'report' | 'menu'>('report'); // New Tab State\n  const [dailyOrders, setDailyOrders] = useState<Order[]>([]);\n  const [expenses, setExpenses] = useState<Expense[]>([]);\n\n  // Mobile Resize State\n  const [mobileCartRatio, setMobileCartRatio] = useState(40); // 40% default\n  const touchStartY = useRef<number | null>(null);\n\n  // Loading State\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    handleResize(); // Initial check\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Mouse Event Handlers for Desktop Support\n  const isDragging = useRef(false);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    isDragging.current = true;\n    touchStartY.current = e.clientY;\n    document.body.style.cursor = 'grabbing';\n  };\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isDragging.current || touchStartY.current === null) return;\n\n      const currentY = e.clientY;\n      const diff = touchStartY.current - currentY;\n\n      // Same logic as Touch\n      if (diff > 50 && mobileCartRatio === 40) {\n        setMobileCartRatio(70);\n        touchStartY.current = null; // Reset to avoid continuous triggering\n        isDragging.current = false;\n        document.body.style.cursor = 'default';\n      }\n      if (diff < -50 && mobileCartRatio === 70) {\n        setMobileCartRatio(40);\n        touchStartY.current = null;\n        isDragging.current = false;\n        document.body.style.cursor = 'default';\n      }\n    };\n\n    const handleMouseUp = () => {\n      isDragging.current = false;\n      touchStartY.current = null;\n      document.body.style.cursor = 'default';\n    };\n\n    // Attach global listeners when component mounts (or just keep them active)\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [mobileCartRatio]);\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    touchStartY.current = e.touches[0].clientY;\n  };\n\n  const handleTouchMove = (e: React.TouchEvent) => {\n    if (touchStartY.current === null) return;\n    const currentY = e.touches[0].clientY;\n    const diff = touchStartY.current - currentY;\n\n    // Pull Up (diff > 0) -> Expand Cart to 70%\n    if (diff > 50 && mobileCartRatio === 40) {\n      setMobileCartRatio(70);\n      touchStartY.current = null; // Reset to prevent multiple triggers\n    }\n    // Pull Down (diff < 0) -> Shrink Cart to 40%\n    if (diff < -50 && mobileCartRatio === 70) {\n      setMobileCartRatio(40);\n      touchStartY.current = null;\n    }\n  };\n\n  // Checkout Modal\n  const [isCheckoutModalOpen, setIsCheckoutModalOpen] = useState(false);\n  const [reportPeriod, setReportPeriod] = useState<'day' | 'month' | 'quarter' | 'year' | 'custom'>('day');\n  const [isDatePickerOpen, setIsDatePickerOpen] = useState(false);\n  const [customStart, setCustomStart] = useState('');\n  const [customEnd, setCustomEnd] = useState('');\n\n  // Reorder State\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [products, setProducts] = useState<Product[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Subscribe to Firestore Data\n  useEffect(() => {\n    // 1. Subscribe to Products\n    const unsubscribeProducts = subscribeToProducts((newProducts) => {\n      setProducts(newProducts);\n      setIsLoaded(true);\n    });\n\n    // 2. Subscribe to Categories\n    const unsubscribeCategories = subscribeToCategories((newCategories) => {\n      // Logic: If we have a locally saved order, try to respect it, otherwise utilize DB order\n      const savedOrder = localStorage.getItem('categoryOrder');\n      if (savedOrder) {\n        try {\n          const parsedOrder = JSON.parse(savedOrder) as Category[];\n          // Map incoming categories to a map for quick lookup\n          const catMap = new Map(newCategories.map(c => [c.id, c]));\n\n          // Reconstruct based on saved ID order, filtering out deleted ones, appending new ones\n          const mergedCategories = parsedOrder\n            .filter(c => catMap.has(c.id))\n            .map(c => catMap.get(c.id)!);\n\n          // Add any new categories that weren't in saved order\n          newCategories.forEach(c => {\n            if (!mergedCategories.find(mc => mc.id === c.id)) {\n              mergedCategories.push(c);\n            }\n          });\n          setCategories(mergedCategories);\n        } catch (e) {\n          setCategories(newCategories);\n        }\n      } else {\n        setCategories(newCategories);\n      }\n\n      // Set active category to first one if none selected and categories exist\n      if (!activeCategory && newCategories.length > 0) {\n        setActiveCategory(newCategories[0].id);\n      }\n    });\n\n    return () => {\n      unsubscribeProducts();\n      unsubscribeCategories();\n    };\n  }, []); // Run once on mount\n\n  // Sync active category initial state\n  useEffect(() => {\n    if (!activeCategory && categories.length > 0) {\n      setActiveCategory(categories[0].id);\n    }\n  }, [categories]);\n\n  // Scroll Container Ref for Drag-to-Scroll\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  // Language Preference\n  const [lang, setLang] = useState<'zh' | 'en'>('zh');\n  const t = UI_TEXT[lang];\n\n  // Load orders from local storage on mount\n  // Load orders from local storage on mount\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const savedOrders = localStorage.getItem('dailyOrders');\n      if (savedOrders) {\n        try {\n          setDailyOrders(JSON.parse(savedOrders));\n        } catch (e) {\n          console.error(\"Failed to parse orders\", e);\n        }\n      }\n      const savedExpenses = localStorage.getItem('expenses');\n      if (savedExpenses) {\n        try {\n          setExpenses(JSON.parse(savedExpenses));\n        } catch (e) {\n          console.error(\"Failed to parse expenses\", e);\n        }\n      }\n\n      // Load saved category order\n      const savedCategories = localStorage.getItem('categoryOrder');\n      if (savedCategories) {\n        try {\n          setCategories(JSON.parse(savedCategories));\n        } catch (e) {\n          console.error(\"Failed to parse category order\", e);\n        }\n      }\n      setIsLoaded(true);\n    }\n  }, []);\n\n  // Save categories when changed (after load)\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem('categoryOrder', JSON.stringify(categories));\n    }\n  }, [categories, isLoaded]);\n\n  // Calculate Dashboard Stats\n  const today = new Date();\n  const todayStr = today.toLocaleDateString();\n  const currentQuarter = Math.floor(today.getMonth() / 3);\n\n  // Determine Date Range\n  let rangeStart = new Date(today);\n  let rangeEnd = new Date(today);\n  rangeStart.setHours(0, 0, 0, 0);\n  rangeEnd.setHours(23, 59, 59, 999);\n\n  if (reportPeriod === 'month') {\n    rangeStart.setDate(1); // 1st day of month\n  } else if (reportPeriod === 'quarter') {\n    rangeStart.setMonth(currentQuarter * 3, 1); // 1st day of quarter\n  } else if (reportPeriod === 'year') {\n    rangeStart.setMonth(0, 1); // Jan 1st\n  } else if (reportPeriod === 'custom') {\n    if (customStart && customEnd) {\n      rangeStart = new Date(customStart);\n      rangeStart.setHours(0, 0, 0, 0);\n      rangeEnd = new Date(customEnd);\n      rangeEnd.setHours(23, 59, 59, 999);\n    }\n  }\n\n  // Helper to check if date is in range\n  const isDateInRange = (date: Date) => date >= rangeStart && date <= rangeEnd;\n\n  // Filter orders based on selected period\n  // Filter orders based on selected period\n  const filteredOrders = dailyOrders.filter(o => {\n    const orderDate = o.timestamp ? new Date(o.timestamp) : new Date(o.date);\n    return isDateInRange(orderDate);\n  });\n\n  const filteredExpenses = expenses.filter(e => {\n    const expenseDate = e.timestamp ? new Date(e.timestamp) : new Date(e.date);\n    return isDateInRange(expenseDate);\n  });\n\n  const totalRevenue = filteredOrders.reduce((sum, o) => sum + o.total, 0);\n  const totalOrdersCount = filteredOrders.length;\n\n  // Calculate Costs\n  const totalCOGS = filteredExpenses.filter(e => e.type === 'cogs').reduce((sum, e) => sum + e.amount, 0);\n  const totalOpEx = filteredExpenses.filter(e => e.type === 'opex').reduce((sum, e) => sum + e.amount, 0);\n  const totalExpenses = totalCOGS + totalOpEx;\n  const netProfit = totalRevenue - totalExpenses;\n\n  // Product Breakdown\n  const productStats = filteredOrders.flatMap(o => o.items).reduce((acc, item: CartItem) => {\n    const displayName = lang === 'en' ? (item.nameEn || item.name) : item.name;\n    acc[displayName] = (acc[displayName] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  // Hourly Statistics Analysis\n  const hourlyStats = filteredOrders.reduce((acc, order) => {\n    // If timestamp exists use it, otherwise fallback to parsing ID or date (for backward compatibility)\n    const orderTime = order.timestamp ? new Date(order.timestamp) : new Date(parseInt(order.id) || Date.now());\n    const hour = orderTime.getHours(); // 0-23\n\n    if (!acc[hour]) {\n      acc[hour] = { revenue: 0, count: 0, products: {} };\n    }\n\n    acc[hour].revenue += order.total;\n    acc[hour].count += 1;\n\n    order.items.forEach((item: CartItem) => {\n      const displayName = lang === 'en' ? (item.nameEn || item.name) : item.name;\n      acc[hour].products[displayName] = (acc[hour].products[displayName] || 0) + 1;\n    });\n\n    return acc;\n  }, {} as Record<number, { revenue: number, count: number, products: Record<string, number> }>);\n\n  // Find max revenue/count for chart scaling\n  const maxHourlyRevenue = Math.max(...Object.values(hourlyStats).map(s => s.revenue), 1);\n\n  // View Preference\n  const [isGroupingEnabled, setIsGroupingEnabled] = useState(true);\n\n  // Grouping State for Expansions\n  const [expandedGroups, setExpandedGroups] = useState<string[]>([]);\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isExpenseModalOpen, setIsExpenseModalOpen] = useState(false);\n  const [expenseModalType, setExpenseModalType] = useState<'cogs' | 'opex'>('cogs');\n  const [editingExpenseId, setEditingExpenseId] = useState<string | null>(null);\n  const [editingItemId, setEditingItemId] = useState<string | null>(null);\n  const [pendingProduct, setPendingProduct] = useState<Product | null>(null); // For new items being added\n  const [tempModifierIds, setTempModifierIds] = useState<string[]>([]);\n  const [modifiers, setModifiers] = useState<Modifier[]>([]); // Dynamic modifiers\n\n  // Subscribe to modifiers\n  useEffect(() => {\n    const unsubscribe = subscribeToModifiers((data) => {\n      setModifiers(data);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Handle Product Click (Add to Cart or Customize)\n  const handleProductClick = (product: Product) => {\n    // Logic to determine if customization is needed\n    // For now, consistent with plan: click opens modal unless it's a \"simple\" item?\n    // User requested \"Click -> Options -> Cart\".\n    // Current logic defines 'isSide' based on category.\n    const isSide = product.category_id === 'cat_sides' || product.category_id === 'cat_drinks';\n\n    // If it's a side/drink, maybe just add directly? User asked about this.\n    // Let's stick to: If modifiers exist (any modifier), or we want to force check.\n    // For better UX: If it's a main dish (Porridge), Open Modal.\n    // If it's side/drink, Add Directly (unless they have modifiers?).\n    // Let's maintain existing implicit logic: Sides bypass modal.\n\n    if (isSide) {\n      addToCart(product);\n    } else {\n      setPendingProduct(product);\n      setTempModifierIds([]);\n      setEditingItemId(null); // Ensure we are not editing\n      setIsModalOpen(true);\n    }\n  };\n\n  // Add to cart (Internal)\n  const addToCart = (product: any, selectedModifierIds: string[] = []) => {\n    // Calculate initial price with modifiers\n    const modifiersPrice = selectedModifierIds.reduce((sum, modId) => {\n      const mod = modifiers.find(m => m.id === modId);\n      return sum + (mod ? mod.price : 0);\n    }, 0);\n\n    // Calculate Volume Discount (for Addons)\n    const selectedAddons = selectedModifierIds.filter(id => {\n      const m = modifiers.find(mod => mod.id === id);\n      return m?.category === 'addon'; // Check category strictly\n    });\n    const volumeDiscount = Math.max(0, (selectedAddons.length - 1) * 5);\n\n\n    const newItem: CartItem = {\n      internalId: Date.now() + Math.random().toString(), // Ensure uniqueness\n      productId: product.id,\n      name: product.name,\n      nameEn: product.nameEn,\n      basePrice: product.price,\n      modifierIds: selectedModifierIds,\n      totalPrice: product.price + modifiersPrice - volumeDiscount,\n      type: product.type,\n    };\n\n    // Create new cart (append only, no sorting for List View)\n    const newCart = [...cart, newItem];\n    setCart(newCart);\n\n    // Force collapse group when adding new item (User preference: default closed)\n    setExpandedGroups(expandedGroups.filter(id => id !== product.id));\n  };\n\n  const removeFromCart = (internalId: string) => {\n    setCart(cart.filter((item) => item.internalId !== internalId));\n  };\n\n  const toggleGroup = (productId: string) => {\n    if (expandedGroups.includes(productId)) {\n      setExpandedGroups(expandedGroups.filter(id => id !== productId));\n    } else {\n      setExpandedGroups([...expandedGroups, productId]);\n    }\n  };\n\n  // Group cart items helper\n  const groupedCart = cart.reduce((acc, item) => {\n    if (!acc[item.productId]) {\n      acc[item.productId] = [];\n    }\n    acc[item.productId].push(item);\n    return acc;\n  }, {} as Record<string, CartItem[]>);\n\n  // Unique IDs for group iteration\n  // Unique IDs for group iteration (Preserve insertion order)\n  const uniqueProductIds = Array.from(new Set(cart.map(item => item.productId)));\n\n  // Open modal for a specific cart item\n  const openModifierModal = (item: CartItem) => {\n    setEditingItemId(item.internalId);\n    setTempModifierIds(item.modifierIds);\n    setIsModalOpen(true);\n  };\n\n  const toggleModifier = (modId: string) => {\n    if (tempModifierIds.includes(modId)) {\n      setTempModifierIds(tempModifierIds.filter(id => id !== modId));\n    } else {\n      setTempModifierIds([...tempModifierIds, modId]);\n    }\n  };\n\n  const confirmModifiers = () => {\n    // Scenario 1: Adding New Item\n    if (pendingProduct) {\n      addToCart(pendingProduct, tempModifierIds);\n      setIsModalOpen(false);\n      setPendingProduct(null);\n      return;\n    }\n\n    // Scenario 2: Editing Existing Item\n    if (!editingItemId) return;\n\n    setCart(cart.map(item => {\n      if (item.internalId === editingItemId) {\n        // Recalculate price\n        const modifiersPrice = tempModifierIds.reduce((sum, modId) => {\n          const mod = modifiers.find(m => m.id === modId);\n          return sum + (mod ? mod.price : 0);\n        }, 0);\n\n        // Calculate Volume Discount (same as ModifierModal)\n        const selectedAddons = tempModifierIds.filter(id => {\n          const m = modifiers.find(mod => mod.id === id);\n          return m?.category === 'addon';\n        });\n        const volumeDiscount = Math.max(0, (selectedAddons.length - 1) * 5);\n\n        return {\n          ...item,\n          modifierIds: tempModifierIds,\n          totalPrice: item.basePrice + modifiersPrice - volumeDiscount\n        };\n      }\n      return item;\n    }));\n    setIsModalOpen(false);\n    setEditingItemId(null);\n  };\n\n  const openCheckoutModal = () => {\n    if (cart.length === 0) return;\n    setIsCheckoutModalOpen(true);\n  };\n\n  const confirmCheckout = (method: 'cash' | 'linepay') => {\n    // Recalculate total with discount\n    const sideDishCount = cart.filter(item => item.type === 'side' || item.type === 'addon').length;\n    const sideDishDiscount = Math.max(0, (sideDishCount - 1) * 5);\n    const total = Math.max(0, cart.reduce((acc, item) => acc + item.totalPrice, 0) - sideDishDiscount);\n\n    const newOrder: Order = {\n      id: Date.now().toString(),\n      items: [...cart],\n      total,\n      date: new Date().toLocaleDateString(),\n      timestamp: Date.now(),\n      paymentMethod: method\n    };\n\n    const newDailyOrders = [...dailyOrders, newOrder];\n    setDailyOrders(newDailyOrders);\n\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('dailyOrders', JSON.stringify(newDailyOrders));\n    }\n\n    setIsCheckoutModalOpen(false);\n\n    const message = lang === 'en'\n      ? `Total: $${total}\\nPayment: ${method === 'cash' ? 'Cash' : 'LINE Pay'}\\nOrder Submitted!`\n      : `ç¸½é‡‘é¡: $${total}\\nä»˜æ¬¾æ–¹å¼: ${method === 'cash' ? 'ç¾é‡‘' : 'LINE Pay'}\\n\\nè¨‚å–®å·²é€å‡ºï¼`;\n\n    alert(message);\n    setCart([]);\n  };\n\n  const handleConfirmExpense = (data: { type: 'cogs' | 'opex', name: string, amount: number }) => {\n    let newExpenses;\n    if (editingExpenseId) {\n      // Update existing\n      newExpenses = expenses.map(e => e.id === editingExpenseId ? { ...e, ...data } : e);\n    } else {\n      // Create new\n      const newExpense: Expense = {\n        id: Date.now().toString(),\n        type: data.type,\n        name: data.name,\n        amount: data.amount,\n        date: new Date().toLocaleDateString(),\n        timestamp: Date.now(),\n      };\n      newExpenses = [newExpense, ...expenses];\n    }\n\n    setExpenses(newExpenses);\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('expenses', JSON.stringify(newExpenses));\n    }\n    // Reset editing state handled by modal close or explicit reset?\n    // Modal close happens in page render 'onClose'.\n    // We should reset editingExpenseId when modal closes.\n  };\n\n  const deleteExpense = (id: string) => {\n    if (!confirm(lang === 'en' ? 'Delete this expense?' : 'ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—Žï¼Ÿ')) return;\n    const newExpenses = expenses.filter(e => e.id !== id);\n    setExpenses(newExpenses);\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('expenses', JSON.stringify(newExpenses));\n    }\n  };\n\n  const openEditExpense = (expense: Expense) => {\n    setEditingExpenseId(expense.id);\n    setExpenseModalType(expense.type);\n    setIsExpenseModalOpen(true);\n  };\n\n  // Calculate Cart Total with \"2nd Side Dish $5 Off\" Logic\n  const sideDishCount = cart.filter(item => item.type === 'side' || item.type === 'addon').length;\n  const sideDishDiscount = Math.max(0, (sideDishCount - 1) * 5);\n  const cartTotal = cart.reduce((acc, item) => acc + item.totalPrice, 0) - sideDishDiscount;\n\n  // Helper to get product name for modal\n  const editingCartItem = cart.find(i => i.internalId === editingItemId);\n  const editingItemName = editingCartItem\n    ? (lang === 'en' ? editingCartItem.nameEn || editingCartItem.name : editingCartItem.name)\n    : '';\n\n  // Calculate current editing expense data for modal\n  const editingExpense = expenses.find(e => e.id === editingExpenseId);\n\n  return (\n    <div className=\"flex h-screen w-full overflow-hidden bg-gray-100 text-gray-900 font-sans flex-col md:flex-row\">\n\n      <div className=\"fixed bottom-2 left-2 text-xs text-gray-300 font-mono z-50 pointer-events-none select-none\">v1.6</div>\n      <ModifierModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        productName={editingItemName || (pendingProduct ? (lang === 'en' ? pendingProduct.nameEn || pendingProduct.name : pendingProduct.name) : '')}\n        basePrice={editingCartItem?.basePrice || pendingProduct?.price || 0}\n        selectedModifiers={tempModifierIds}\n        onToggleModifier={toggleModifier}\n        onConfirm={confirmModifiers}\n        lang={lang}\n        productId={editingCartItem?.productId || pendingProduct?.id}\n        modifiers={modifiers}\n      />\n\n      <AddExpenseModal\n        isOpen={isExpenseModalOpen}\n        onClose={() => {\n          setIsExpenseModalOpen(false);\n          setEditingExpenseId(null);\n        }}\n        onConfirm={handleConfirmExpense}\n        defaultType={expenseModalType}\n        initialData={editingExpense ? { name: editingExpense.name, amount: editingExpense.amount } : undefined}\n        lockType={true}\n        lang={lang}\n      />\n\n      <CheckoutModal\n        isOpen={isCheckoutModalOpen}\n        onClose={() => setIsCheckoutModalOpen(false)}\n        total={cartTotal}\n        onConfirm={confirmCheckout}\n        lang={lang}\n      />\n\n      {/* LEFT: Product Menu (or Dashboard) */}\n      <div\n        className={clsx(\n          \"flex w-full flex-col border-b md:border-b-0 md:border-r border-gray-300 bg-white transition-all duration-300\",\n          viewMode === 'dashboard' ? \"md:w-full h-full\" : \"md:w-[60%] lg:w-[70%] md:h-full\"\n        )}\n        style={{\n          height: viewMode === 'dashboard' ? '100%' : (isMobile ? `${100 - mobileCartRatio}%` : '100%')\n        }}\n      >\n\n        {/* Category Tabs / Dashboard Actions */}\n        <div className=\"flex h-16 w-full items-center justify-between border-b border-gray-200 bg-gray-50 px-4 flex-shrink-0\">\n          <div\n            ref={scrollContainerRef}\n            className=\"flex items-center gap-2 overflow-x-auto scrollbar-hide snap-x snap-mandatory touch-pan-x\"\n          >\n            {/* Mode Toggle Button (Dashboard vs POS) */}\n            <button\n              onClick={() => setViewMode(viewMode === 'pos' ? 'dashboard' : 'pos')}\n              className={clsx(\n                'flex-shrink-0 rounded-full px-6 py-2 text-lg font-bold transition-all border-2 mb-0 snap-start select-none',\n                viewMode === 'dashboard'\n                  ? 'bg-purple-600 text-white border-purple-600 shadow-md'\n                  : 'bg-white text-purple-600 border-purple-200 hover:bg-purple-50'\n              )}\n            >\n              {lang === 'en' ? 'back to POS' : (viewMode === 'dashboard' ? 'â¬… å›žé»žé¤' : 'ðŸ“Š ç®¡ç†å¾Œå°')}\n            </button>\n\n            <div className=\"w-px h-8 bg-gray-300 mx-1 flex-shrink-0 snap-start\"></div>\n\n            {viewMode === 'pos' ? (\n              // POS Categories with Drag-to-Reorder\n              <Reorder.Group\n                axis=\"x\"\n                values={categories}\n                onReorder={setCategories}\n                className=\"flex gap-2\"\n              >\n                {categories.map((cat) => (\n                  <Reorder.Item\n                    key={cat.id}\n                    value={cat}\n                    as=\"div\"\n                    className=\"flex-shrink-0 snap-start\"\n                  >\n                    <button\n                      onClick={() => { setActiveCategory(cat.id); setViewMode('pos'); }}\n                      className={clsx(\n                        'rounded-full px-6 py-2 text-lg font-bold transition-all select-none',\n                        viewMode === 'pos' && activeCategory === cat.id\n                          ? 'bg-blue-600 text-white shadow-md'\n                          : 'bg-white text-gray-600 hover:bg-gray-100'\n                      )}\n                    >\n                      {lang === 'en' ? cat.nameEn : cat.name}\n                    </button>\n                  </Reorder.Item>\n                ))}\n              </Reorder.Group>\n            ) : (\n              // DASHBOARD TABS (Report vs Menu)\n              <div className=\"flex bg-gray-200/50 p-1 rounded-full\">\n                <button\n                  onClick={() => setDashboardTab('report')}\n                  className={clsx(\n                    \"px-4 py-1.5 rounded-full text-sm font-bold transition-all\",\n                    dashboardTab === 'report' ? \"bg-white text-gray-800 shadow-sm\" : \"text-gray-500 hover:text-gray-700\"\n                  )}\n                >\n                  {lang === 'en' ? 'Sales Report' : 'ç‡Ÿæ”¶å ±è¡¨'}\n                </button>\n                <button\n                  onClick={() => setDashboardTab('menu')}\n                  className={clsx(\n                    \"px-4 py-1.5 rounded-full text-sm font-bold transition-all\",\n                    dashboardTab === 'menu' ? \"bg-white text-gray-800 shadow-sm\" : \"text-gray-500 hover:text-gray-700\"\n                  )}\n                >\n                  {lang === 'en' ? 'Menu Setup' : 'èœå–®ç®¡ç†'}\n                </button>\n              </div>\n            )}\n\n            {/* Quick Actions (Keep them but maybe verify if they fit) */}\n            {viewMode === 'dashboard' && dashboardTab === 'report' && (\n              <>\n                <div className=\"w-px h-8 bg-gray-300 mx-1 flex-shrink-0\"></div>\n                <button\n                  onClick={() => {\n                    setEditingExpenseId(null);\n                    setExpenseModalType('cogs');\n                    setIsExpenseModalOpen(true);\n                  }}\n                  className=\"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-red-200 bg-white text-red-600 hover:bg-red-50 hover:border-red-300 flex items-center gap-1\"\n                >\n                  <TrendingDown size={16} />\n                  {lang === 'en' ? 'Purchase' : 'é€²è²¨'}\n                </button>\n                <button\n                  onClick={() => {\n                    setEditingExpenseId(null);\n                    setExpenseModalType('opex');\n                    setIsExpenseModalOpen(true);\n                  }}\n                  className=\"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-yellow-200 bg-white text-yellow-600 hover:bg-yellow-50 hover:border-yellow-300 flex items-center gap-1\"\n                >\n                  <DollarSign size={16} />\n                  {lang === 'en' ? 'Expense' : 'è²»ç”¨'}\n                </button>\n              </>\n            )}\n          </div>\n\n          {/* Language Toggle */}\n          <button\n            onClick={() => setLang(lang === 'zh' ? 'en' : 'zh')}\n            className=\"flex flex-shrink-0 items-center gap-1 rounded-full border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium hover:bg-gray-50 text-gray-700 ml-2\"\n          >\n            <Globe size={16} />\n            <span>{lang === 'zh' ? 'English' : 'ä¸­æ–‡'}</span>\n          </button>\n        </div>\n\n        {/* Product Grid / Dashboard Content */}\n        <div className=\"flex-1 overflow-y-auto p-4 bg-gray-50\">\n          {viewMode === 'dashboard' ? (\n            // Dashboard Content Wrapper\n            <div className=\"max-w-5xl mx-auto\">\n              {dashboardTab === 'menu' ? (\n                // 1. MENU MANAGER PROTOTYPE\n                <div className=\"flex flex-col items-center justify-center p-12 text-gray-400 bg-white rounded-2xl border-2 border-dashed border-gray-200\">\n                  <p className=\"font-bold\">Please go to /dashboard for Menu Management</p>\n                  <p className=\"text-sm\">è«‹å‰å¾€ç®¡ç†å¾Œå°é€²è¡Œèœå–®è¨­å®š</p>\n                </div>\n              ) : (\n                // 2. SALES REPORT (Existing content)\n                <div className=\"space-y-6\">\n                  <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4\">\n                    <h2 className=\"text-2xl font-bold text-gray-800\">\n                      {lang === 'en' ? 'Sales Report' : 'ç‡Ÿæ”¶å ±è¡¨'}\n                      <span className=\"text-base font-normal text-gray-500 ml-3 bg-gray-100 px-3 py-1 rounded-full\">\n                        {lang === 'en'\n                          ? `${rangeStart.toLocaleDateString()} ~ ${rangeEnd.toLocaleDateString()}`\n                          : `${rangeStart.getFullYear()}/${rangeStart.getMonth() + 1}/${rangeStart.getDate()} ~ ${rangeEnd.getFullYear()}/${rangeEnd.getMonth() + 1}/${rangeEnd.getDate()}`\n                        }\n                      </span>\n                    </h2>\n\n                    {/* Period Toggles & Date Picker */}\n                    <div className=\"relative flex flex-col gap-2 items-end\">\n                      <div className=\"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200\">\n                        {(['day', 'month', 'quarter', 'year', 'custom'] as const).map(p => (\n                          <button\n                            key={p}\n                            onClick={() => {\n                              setReportPeriod(p);\n                              if (p === 'custom') setIsDatePickerOpen(true);\n                            }}\n                            className={clsx(\n                              \"px-4 py-1.5 rounded-md text-sm font-medium transition-all\",\n                              reportPeriod === p ? \"bg-purple-100 text-purple-700 shadow-sm\" : \"text-gray-500 hover:bg-gray-50\"\n                            )}\n                          >\n                            {lang === 'en'\n                              ? (p === 'day' ? 'Today' : p === 'month' ? 'Month' : p === 'quarter' ? 'Quarter' : p === 'year' ? 'Year' : 'Custom')\n                              : (p === 'day' ? 'æœ¬æ—¥' : p === 'month' ? 'æœ¬æœˆ' : p === 'quarter' ? 'æœ¬å­£' : p === 'year' ? 'æœ¬å¹´' : 'è‡ªé¸')}\n                          </button>\n                        ))}\n                      </div>\n\n                      {/* Custom Date Inputs (Absolute to prevent layout shift) */}\n                      {reportPeriod === 'custom' && isDatePickerOpen && (\n                        <div className=\"absolute top-10 right-0 z-30 flex flex-col gap-3 bg-white p-4 rounded-xl shadow-xl border border-gray-200 animate-in fade-in zoom-in-95 origin-top-right w-64 md:w-72\">\n                          <div className=\"flex justify-between items-center border-b pb-2 mb-1\">\n                            <span className=\"font-bold text-gray-700 text-sm\">{lang === 'en' ? 'Select Range' : 'é¸æ“‡æ—¥æœŸç¯„åœ'}</span>\n                            <button onClick={() => setIsDatePickerOpen(false)} className=\"p-1 hover:bg-gray-100 rounded-full\">\n                              <X size={16} className=\"text-gray-400\" />\n                            </button>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <input\n                              type=\"date\"\n                              value={customStart}\n                              onChange={(e) => setCustomStart(e.target.value)}\n                              className=\"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 from-input\"\n                            />\n                            <span className=\"text-gray-400\">~</span>\n                            <input\n                              type=\"date\"\n                              value={customEnd}\n                              onChange={(e) => {\n                                setCustomEnd(e.target.value);\n                                if (e.target.value) setIsDatePickerOpen(false);\n                              }}\n                              className=\"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 to-input\"\n                            />\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* P&L Key Metrics (Updated) */}\n                  <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n                    {/* Revenue */}\n                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-blue-500 border-gray-100\">\n                      <p className=\"text-gray-500 font-medium mb-1 flex items-center gap-1\">\n                        <TrendingUp size={16} className=\"text-blue-500\" />\n                        {lang === 'en' ? 'Revenue' : 'ç¸½ç‡Ÿæ”¶ (Sales)'}\n                      </p>\n                      <p className=\"text-3xl font-bold text-blue-600\">${totalRevenue}</p>\n                      <p className=\"text-sm text-gray-400 mt-1\">{totalOrdersCount} {lang === 'en' ? 'orders' : 'ç­†è¨‚å–®'}</p>\n                    </div>\n\n                    {/* COGS */}\n                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-red-500 border-gray-100\">\n                      <p className=\"text-gray-500 font-medium mb-1 flex items-center gap-1\">\n                        <TrendingDown size={16} className=\"text-red-500\" />\n                        {lang === 'en' ? 'COGS' : 'é€²è²¨æˆæœ¬ (COGS)'}\n                      </p>\n                      <p className=\"text-3xl font-bold text-red-600\">-${totalCOGS}</p>\n                      <p className=\"text-sm text-gray-400 mt-1\">{filteredExpenses.filter(e => e.type === 'cogs').length} {lang === 'en' ? 'entries' : 'ç­†ç´€éŒ„'}</p>\n                    </div>\n\n                    {/* OpEx */}\n                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-yellow-500 border-gray-100\">\n                      <p className=\"text-gray-500 font-medium mb-1 flex items-center gap-1\">\n                        <DollarSign size={16} className=\"text-yellow-500\" />\n                        {lang === 'en' ? 'Expenses' : 'ç‡Ÿæ¥­è²»ç”¨ (OpEx)'}\n                      </p>\n                      <p className=\"text-3xl font-bold text-yellow-600\">-${totalOpEx}</p>\n                      <p className=\"text-sm text-gray-400 mt-1\">{filteredExpenses.filter(e => e.type === 'opex').length} {lang === 'en' ? 'items' : 'ç­†ç´€éŒ„'}</p>\n                    </div>\n\n                    {/* Net Profit */}\n                    <div className={clsx(\n                      \"p-6 rounded-2xl shadow-md border-l-4 border-gray-100\",\n                      netProfit >= 0 ? \"bg-green-50 border-l-green-500\" : \"bg-red-50 border-l-red-500\"\n                    )}>\n                      <p className=\"text-gray-600 font-bold mb-1 flex items-center gap-1\">\n                        ðŸŽ‰ {lang === 'en' ? 'Net Profit' : 'æ·¨åˆ© (Net Profit)'}\n                      </p>\n                      <p className={clsx(\"text-3xl font-extrabold break-all\", netProfit >= 0 ? \"text-green-700\" : \"text-red-700\")}>\n                        ${netProfit.toLocaleString()}\n                      </p>\n                      <p className=\"text-sm opacity-60 mt-1 font-medium\">\n                        {lang === 'en' ? 'Margin' : 'æ·¨åˆ©çŽ‡'}: {totalRevenue > 0 ? Math.round((netProfit / totalRevenue) * 100) : 0}%\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Profit Chart (New) */}\n                  <div className=\"mb-6\">\n                    <ProfitChart\n                      orders={filteredOrders}\n                      expenses={filteredExpenses}\n                      startDate={rangeStart}\n                      endDate={rangeEnd}\n                      period={reportPeriod}\n                      lang={lang}\n                    />\n                  </div>\n\n                  {/* Expense List (New) */}\n                  <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-200\">\n                    <h3 className=\"text-lg font-bold text-gray-800 mb-4 border-b pb-2 flex justify-between items-center\">\n                      {lang === 'en' ? 'Expense History' : 'æ”¯å‡ºç´€éŒ„æ˜Žç´°'}\n                      <span className=\"text-sm font-normal text-gray-500\">\n                        Total: -${totalExpenses}\n                      </span>\n                    </h3>\n                    <div className=\"space-y-3 max-h-60 overflow-y-auto pr-2\">\n                      {filteredExpenses.length === 0 ? (\n                        <p className=\"text-gray-400 text-center py-4\">{lang === 'en' ? 'No expenses recorded.' : 'å°šç„¡æ”¯å‡ºç´€éŒ„'}</p>\n                      ) : (\n                        filteredExpenses\n                          .sort((a, b) => b.timestamp - a.timestamp)\n                          .map((expense) => (\n                            <div key={expense.id} className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n                              <div className=\"flex items-center gap-3\">\n                                <span className={clsx(\n                                  \"px-2 py-1 rounded text-xs font-bold uppercase w-16 text-center\",\n                                  expense.type === 'cogs' ? \"bg-red-100 text-red-700\" : \"bg-yellow-100 text-yellow-700\"\n                                )}>\n                                  {expense.type === 'cogs' ? 'COGS' : 'OpEx'}\n                                </span>\n                                <div>\n                                  <p className=\"font-bold text-gray-800\">{expense.name}</p>\n                                  <p className=\"text-xs text-gray-500\">\n                                    {new Date(expense.timestamp).toLocaleString(lang === 'zh' ? 'zh-TW' : 'en-US', { hour12: false })}\n                                  </p>\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-4\">\n                                <span className=\"font-bold text-gray-700\">-${expense.amount}</span>\n                                <div className=\"flex items-center gap-2\">\n                                  <button\n                                    onClick={() => openEditExpense(expense)}\n                                    className=\"p-1.5 rounded-full hover:bg-gray-200 text-gray-500 transition-colors\"\n                                  >\n                                    <Pencil size={18} />\n                                  </button>\n                                  <button\n                                    onClick={() => deleteExpense(expense.id)}\n                                    className=\"p-1.5 rounded-full hover:bg-red-100 text-red-500 transition-colors\"\n                                  >\n                                    <Trash2 size={18} />\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Product Breakdown */}\n                  <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-200\">\n                    <h3 className=\"text-lg font-bold text-gray-800 mb-4 border-b pb-2\">\n                      {lang === 'en' ? 'Product Sales' : 'ç†±éŠ·å•†å“çµ±è¨ˆ'}\n                    </h3>\n                    <div className=\"space-y-3\">\n                      {Object.keys(productStats).length === 0 ? (\n                        <p className=\"text-gray-400 text-center py-4\">{lang === 'en' ? 'No sales yet today.' : 'å°šç„¡éŠ·å”®è³‡æ–™'}</p>\n                      ) : (\n                        Object.entries(productStats)\n                          .sort(([, a], [, b]) => b - a)\n                          .map(([name, count]) => (\n                            <div key={name} className=\"flex items-center justify-between\">\n                              <span className=\"text-gray-700 font-medium\">{name}</span>\n                              <span className=\"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold\">x {count}</span>\n                            </div>\n                          ))\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Hourly Analysis (Peak Hours) */}\n                  <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-200\">\n                    <h3 className=\"text-lg font-bold text-gray-800 mb-6 border-b pb-2\">\n                      {lang === 'en' ? 'Hourly Sales (Peak Times)' : 'ç†±éŠ·æ™‚æ®µåˆ†æž'}\n                    </h3>\n\n                    {Object.keys(hourlyStats).length === 0 ? (\n                      <p className=\"text-gray-400 text-center py-4\">{lang === 'en' ? 'No sales yet today.' : 'å°šç„¡æ™‚æ®µè³‡æ–™'}</p>\n                    ) : (\n                      <div className=\"space-y-6\">\n                        {/* Chart & Details */}\n                        {Object.entries(hourlyStats)\n                          .sort(([hourA], [hourB]) => parseInt(hourA) - parseInt(hourB))\n                          .map(([hourStr, stats]) => {\n                            const hour = parseInt(hourStr);\n                            const listTime = `${hour}:00 - ${hour + 1}:00`;\n                            const percentage = (stats.revenue / maxHourlyRevenue) * 100;\n                            const topProducts = Object.entries(stats.products)\n                              .sort(([, a], [, b]) => b - a)\n                              .slice(0, 3); // Top 3\n\n                            return (\n                              <div key={hour} className=\"flex flex-col gap-2\">\n                                {/* Header row */}\n                                <div className=\"flex justify-between items-end\">\n                                  <span className=\"font-bold text-gray-700 w-32\">{listTime}</span>\n                                  <div className=\"flex gap-4 text-sm\">\n                                    <span className=\"text-blue-600 font-bold\">${stats.revenue}</span>\n                                    <span className=\"text-gray-500\">{stats.count} {lang === 'en' ? 'orders' : 'å–®'}</span>\n                                  </div>\n                                </div>\n\n                                {/* Bar Chart */}\n                                <div className=\"w-full bg-gray-100 rounded-full h-2.5 mb-1 overflow-hidden\">\n                                  <div\n                                    className=\"bg-blue-500 h-2.5 rounded-full transition-all duration-500\"\n                                    style={{ width: `${percentage}%` }}\n                                  ></div>\n                                </div>\n\n                                {/* Detailed Product Breakdown for this hour */}\n                                <div className=\"pl-2 border-l-2 border-gray-200 ml-1\">\n                                  <div className=\"flex flex-wrap gap-2 mt-1\">\n                                    {topProducts.map(([pName, pCount]) => (\n                                      <span key={pName} className=\"text-xs bg-orange-50 text-orange-800 px-2 py-0.5 rounded border border-orange-100\">\n                                        {pName} <span className=\"font-bold opacity-70\">x{pCount}</span>\n                                      </span>\n                                    ))}\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"text-center pt-8\">\n                    <button\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if (window.confirm(lang === 'en' ? 'Clear all history?' : 'ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„å—Žï¼Ÿ(ç„¡æ³•å¾©åŽŸ)')) {\n                          // 1. Clear Local Storage\n                          localStorage.removeItem('dailyOrders');\n                          localStorage.removeItem('expenses');\n\n                          // 2. Clear State\n                          setDailyOrders([]);\n                          setExpenses([]);\n\n                          // 3. Force UI Update notification\n                          alert(lang === 'en' ? 'Data cleared successfully' : 'è³‡æ–™å·²å…¨éƒ¨æ¸…é™¤ï¼');\n                        }\n                      }}\n                      className=\"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium\"\n                    >\n                      {lang === 'en' ? 'Reset Data' : 'æ¸…é™¤æ‰€æœ‰è³‡æ–™'}\n                    </button>\n\n\n\n                    <button\n                      type=\"button\"\n                      disabled={isGenerating}\n                      onClick={async () => {\n                        if (!confirm(lang === 'en' ? 'Generate smart profit data?' : 'ç¢ºå®šè¦ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€æ¸¬è©¦è³‡æ–™å—Žï¼Ÿ\\n(é€™æœƒæ¨¡æ“¬çœŸå¯¦ç¶“ç‡Ÿï¼šæˆæœ¬ç´„ä½”ç‡Ÿæ”¶ 35%ï¼Œä¸¦ç”¢ç”Ÿæ¯æœˆå›ºå®šé–‹éŠ·)')) return;\n\n                        setIsGenerating(true);\n\n                        // Use setTimeout to allow UI to render the disabled state\n                        setTimeout(() => {\n                          const mockOrders: Order[] = [];\n                          const mockExpenses: Expense[] = [];\n                          const now = new Date();\n\n                          // Iterate through last 12 months (approx 365 days)\n                          for (let d = 365; d >= 0; d--) {\n                            const currentDate = new Date(now);\n                            currentDate.setDate(currentDate.getDate() - d);\n                            const dateStr = currentDate.toLocaleDateString();\n                            const dayOfMonth = currentDate.getDate();\n\n                            // 1. Generate Daily Orders (Revenue)\n                            // Busy days: Weekend (Fri, Sat, Sun)\n                            const isWeekend = [0, 5, 6].includes(currentDate.getDay());\n                            const dailyOrderCount = isWeekend ? Math.floor(Math.random() * 8) + 5 : Math.floor(Math.random() * 5) + 2; // 5-12 orders or 2-6 orders\n\n                            let dailyRevenue = 0;\n                            const dailyItems: CartItem[] = [];\n\n                            for (let i = 0; i < dailyOrderCount; i++) {\n                              const itemCount = Math.floor(Math.random() * 3) + 1;\n                              const items: CartItem[] = [];\n                              let orderTotal = 0;\n\n                              for (let j = 0; j < itemCount; j++) {\n                                const product = products[Math.floor(Math.random() * products.length)];\n                                if (!product) continue;\n                                items.push({\n                                  internalId: Math.random().toString().slice(2, 8),\n                                  productId: product.id,\n                                  name: product.name,\n                                  nameEn: product.nameEn,\n                                  basePrice: product.price,\n                                  modifierIds: [],\n                                  totalPrice: product.price,\n                                  type: product.type\n                                });\n                                orderTotal += product.price;\n                              }\n\n                              mockOrders.push({\n                                id: Math.random().toString().slice(2, 8),\n                                items,\n                                total: orderTotal,\n                                date: dateStr,\n                                timestamp: currentDate.getTime() + Math.random() * 10000,\n                                paymentMethod: Math.random() > 0.4 ? 'cash' : 'linepay'\n                              });\n\n                              dailyRevenue += orderTotal;\n                            }\n\n                            // 2. Generate Expenses (Cost) based on Revenue (Smart Logic)\n                            if (dailyRevenue > 0) {\n                              // Ingredients Cost: approx 30-40% of revenue\n                              const costRatio = 0.3 + (Math.random() * 0.1);\n                              const costAmount = Math.floor(dailyRevenue * costRatio);\n\n                              mockExpenses.push({\n                                id: Math.random().toString().slice(2, 8),\n                                type: 'cogs',\n                                name: `æœ¬æ—¥é£ŸææŽ¡è³¼ (${dateStr})`,\n                                amount: costAmount,\n                                date: dateStr,\n                                timestamp: currentDate.getTime()\n                              });\n                            }\n\n                            // 3. Monthly Fixed Costs (Rent & Utilities)\n                            if (dayOfMonth === 1) {\n                              mockExpenses.push({\n                                id: Math.random().toString().slice(2, 8),\n                                type: 'opex',\n                                name: 'åº—é¢ç§Ÿé‡‘',\n                                amount: 15000,\n                                date: dateStr,\n                                timestamp: currentDate.getTime()\n                              });\n                            }\n                            if (dayOfMonth === 15) {\n                              mockExpenses.push({\n                                id: Math.random().toString().slice(2, 8),\n                                type: 'opex',\n                                name: 'æ°´é›»ç“¦æ–¯è²»',\n                                amount: 3500,\n                                date: dateStr,\n                                timestamp: currentDate.getTime()\n                              });\n                            }\n                          }\n\n                          // Update State & LocalStorage\n                          const combinedOrders = [...dailyOrders, ...mockOrders];\n                          const combinedExpenses = [...expenses, ...mockExpenses];\n\n                          setDailyOrders(combinedOrders);\n                          setExpenses(combinedExpenses);\n\n                          try {\n                            localStorage.setItem('dailyOrders', JSON.stringify(combinedOrders));\n                            localStorage.setItem('expenses', JSON.stringify(combinedExpenses));\n                            alert(lang === 'en'\n                              ? 'Success! Smart Profit Data Generated.'\n                              : 'æˆåŠŸï¼å·²ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€è³‡æ–™ ðŸ“ˆ\\n\\n- è¨‚å–®ï¼šéš¨æ©Ÿåˆ†ä½ˆ (é€±æœ«è¼ƒå¤š)\\n- æˆæœ¬ï¼šè‡ªå‹•è¨­ç‚ºç‡Ÿæ”¶çš„ 30%~40%\\n- æ”¯å‡ºï¼šæ¯æœˆå›ºå®šç§Ÿé‡‘/æ°´é›»');\n                          } catch (e) {\n                            alert('Storage Quota Exceeded!');\n                            console.error(e);\n                          } finally {\n                            setIsGenerating(false);\n                          }\n                        }, 50); // Small delay to allow UI to update\n                      }}\n                      className={clsx(\n                        \"text-sm hover:underline ml-4\",\n                        isGenerating ? \"text-gray-400 cursor-not-allowed\" : \"text-blue-500 hover:text-blue-700\"\n                      )}\n                    >\n                      {isGenerating\n                        ? (lang === 'en' ? 'Generating...' : 'ç”Ÿæˆä¸­...')\n                        : (lang === 'en' ? 'Generate Profit Data' : 'ç”Ÿæˆç²åˆ©æ¸¬è©¦è³‡æ–™')\n                      }\n                    </button>\n                  </div>\n                </div>\n\n              )}\n            </div>\n          ) : (\n            <>\n              {/* Mobile View: Single Grid (Sorted) */}\n              <div className=\"grid grid-cols-2 gap-4 md:hidden\">\n                {products\n                  .filter((p) => p.category_id === activeCategory)\n                  .sort((a, b) => {\n                    const typeOrder: Record<string, number> = { meat: 1, seafood: 2, cheese: 3, special: 4, side: 5, addon: 6, drink: 7 };\n                    return (typeOrder[a.type] || 99) - (typeOrder[b.type] || 99);\n                  })\n                  .map((product: any) => (\n                    <ProductCard key={product.id} product={product} addToCart={handleProductClick} lang={lang} />\n                  ))}\n              </div>\n\n              {/* Tablet/Desktop View: Separated Rows by Type */}\n              <div className=\"hidden md:block space-y-8\">\n                {['meat', 'seafood', 'cheese', 'special', 'side', 'addon', 'drink'].map((type) => {\n                  const items = products.filter(p => p.category_id === activeCategory && p.type === type);\n                  if (items.length === 0) return null;\n\n                  return (\n                    <div key={type} className=\"space-y-3\">\n                      <div className=\"grid grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {items.map((product: any) => (\n                          <ProductCard key={product.id} product={product} addToCart={handleProductClick} lang={lang} />\n                        ))}\n                      </div>\n                      <div className=\"h-px bg-gray-200 w-full\"></div>\n                    </div>\n                  );\n                })}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* RIGHT: Cart */}\n      <div\n        className=\"flex flex-col bg-gray-50 transition-all duration-300 w-full md:w-[40%] lg:w-[35%] md:h-full border-t md:border-t-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] md:shadow-none\"\n        style={{\n          height: viewMode === 'dashboard' ? '0px' : (isMobile ? `${mobileCartRatio}%` : '100%'),\n          display: viewMode === 'dashboard' ? 'none' : 'flex'\n        }}\n      >\n        {/* Mobile Drag Handle */}\n        <div\n          className=\"h-6 w-full bg-white border-t border-gray-200 flex items-center justify-center cursor-grab md:hidden flex-shrink-0 touch-none hover:bg-gray-50 active:bg-gray-100 transition-colors\"\n          onTouchStart={handleTouchStart}\n          onTouchMove={handleTouchMove}\n          onMouseDown={handleMouseDown}\n        >\n          <div className=\"w-12 h-1.5 bg-gray-300 rounded-full\" />\n        </div>\n\n        {/* Cart Header */}\n        <div className=\"flex h-16 items-center justify-between border-b border-gray-200 px-4 shadow-sm bg-white flex-shrink-0\">\n          <div className=\"flex items-center gap-2\">\n            <h2 className=\"text-xl font-bold text-gray-800\">{t.cartTitle}</h2>\n            <span className=\"rounded-full bg-blue-100 px-3 py-1 text-sm font-bold text-blue-800\">\n              {cart.length} {t.items}\n            </span>\n          </div>\n\n          {/* View Toggle */}\n          <button\n            onClick={() => setIsGroupingEnabled(!isGroupingEnabled)}\n            className=\"flex items-center gap-1 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-200 transition-colors\"\n          >\n            {isGroupingEnabled ? <Layers size={16} /> : <List size={16} />}\n            <span>{isGroupingEnabled ? t.grouping : t.noGrouping}</span>\n          </button>\n        </div>\n\n        {/* Cart Items List */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n          {cart.length === 0 ? (\n            <div className=\"flex h-full flex-col items-center justify-center text-gray-400 opacity-50\">\n              <span className=\"text-6xl\">ðŸ›’</span>\n              <p className=\"mt-4 text-lg\">{t.emptyCartTitle}</p>\n            </div>\n          ) : (\n            // RENDER LOGIC\n            isGroupingEnabled ? (\n              // --- IS GROUPED MODE ---\n              uniqueProductIds.map((productId) => {\n                const items = groupedCart[productId];\n                const firstItem = items[0];\n                const count = items.length;\n                const isExpanded = expandedGroups.includes(productId);\n\n                // Color map\n                let groupColor = 'border-gray-100 hover:border-blue-300';\n                let bgColor = 'bg-white';\n                if (firstItem.type === 'meat') { groupColor = 'border-red-100 hover:border-red-300 text-red-900'; bgColor = 'bg-red-50'; }\n                if (firstItem.type === 'seafood') { groupColor = 'border-blue-100 hover:border-blue-300 text-blue-900'; bgColor = 'bg-blue-50'; }\n                if (firstItem.type === 'cheese') { groupColor = 'border-yellow-100 hover:border-yellow-300 text-yellow-900'; bgColor = 'bg-yellow-50'; }\n                if (firstItem.type === 'special') { groupColor = 'border-purple-100 hover:border-purple-300 text-purple-900'; bgColor = 'bg-purple-50'; }\n\n                const displayName = lang === 'en' ? (firstItem.nameEn || firstItem.name) : firstItem.name;\n                const product = products.find(p => p.id === firstItem.productId);\n                const isSide = product?.category_id === 'cat_sides' || product?.category_id === 'cat_drinks' || false;\n\n                // Single item render (Standard)\n                if (count === 1) {\n                  const item = firstItem;\n                  const product = products.find(p => p.id === item.productId);\n                  const isSide = product?.category_id === 'cat_sides' || product?.category_id === 'cat_drinks' || false;\n\n                  return (\n                    <div\n                      key={item.internalId}\n                      onClick={isSide ? undefined : () => openModifierModal(item)}\n                      className={clsx(\n                        \"group relative flex items-center p-2 shadow-sm border-2 transition-all\",\n                        !isSide && \"cursor-pointer\",\n                        bgColor, groupColor\n                      )}\n                    >\n                      {/* Zone 1: Expansion Icon / Spacer (Fixed width w-6) */}\n                      <div className=\"w-6 flex-shrink-0 flex items-center justify-center\">\n                        {/* Empty for single item List View */}\n                      </div>\n\n                      {/* Zone 2: Product Name (Flex Fill) */}\n                      <div className=\"flex-1 min-w-0 pr-2\">\n                        <h3 className=\"text-[15px] font-bold leading-tight truncate\">{displayName}</h3>\n                        {item.modifierIds.length > 0 && (\n                          <p className=\"text-sm opacity-80 mt-1 truncate\">\n                            {item.modifierIds.map(mid => {\n                              const m = MODIFIERS.find(mod => mod.id === mid);\n                              return m ? (lang === 'en' ? (m.nameEn || m.name) : m.name) : null;\n                            }).filter(Boolean).join(', ')}\n                          </p>\n                        )}\n                      </div>\n\n                      {/* Zone 3: Right Cluster (Fixed Alignments) */}\n                      <div className=\"flex items-center gap-1 flex-shrink-0\">\n                        {/* Quantity Badge (Fixed width) */}\n                        <div className=\"w-[28px] flex justify-center\">\n                          {/* Hidden spacer or invisible count to maintain grid structure if needed, or just empty */}\n                        </div>\n\n                        {/* Status Badge (Fixed width w-[48px]) */}\n                        <div className=\"w-[48px] flex justify-center\">\n                          {!isSide && (\n                            <span className=\"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider\">\n                              {t.canCustomize}\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Price (Fixed width w-[50px], Right Aligned) */}\n                        <div className=\"w-[50px] text-right\">\n                          <p className=\"text-md font-medium\">${item.totalPrice}</p>\n                        </div>\n\n                        {/* Action Button (Fixed width w-[32px] for click target) */}\n                        <div className=\"w-[32px] flex justify-end\">\n                          <button\n                            onClick={(e) => { e.stopPropagation(); removeFromCart(item.internalId); }}\n                            className={clsx(\n                              \"flex-shrink-0 rounded-full p-2 transition-colors\",\n                              \"text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100\"\n                            )}\n                          >\n                            <Trash2 size={24} />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n\n                // Multiple items render (Group)\n                const isNoCustom = isSide;\n\n                return (\n                  <div key={productId} className=\"rounded-lg shadow-sm overflow-hidden border border-gray-200 bg-white\">\n                    {/* Group Header */}\n                    <div\n                      onClick={() => !isNoCustom && toggleGroup(productId)}\n                      className={clsx(\n                        \"flex items-center p-2 transition-colors\",\n                        !isNoCustom && \"cursor-pointer\",\n                        bgColor\n                      )}\n                    >\n                      {/* Zone 1: Expansion Icon / Spacer (Fixed width w-6) */}\n                      <div className=\"w-6 flex-shrink-0 flex items-center justify-center\">\n                        {!isNoCustom ? (\n                          isExpanded ? <ChevronDown size={20} /> : <ChevronRight size={20} />\n                        ) : (\n                          // Spacer\n                          <div className=\"w-[20px]\" />\n                        )}\n                      </div>\n\n                      {/* Zone 2: Product Name (Flex Fill) */}\n                      <div className=\"flex-1 min-w-0 pr-2\">\n                        <h3 className={clsx(\n                          \"text-[15px] font-bold leading-tight truncate\",\n                          groupColor.split(' ').find(c => c.startsWith('text-')) || 'text-gray-800'\n                        )}>\n                          {displayName}\n                        </h3>\n                      </div>\n\n                      {/* Zone 3: Right Cluster (Fixed Alignments) */}\n                      <div className=\"flex items-center gap-1 flex-shrink-0\">\n                        {/* Quantity Badge (Fixed width w-[28px]) */}\n                        <div className=\"w-[28px] flex justify-center\">\n                          <span className=\"flex-shrink-0 w-8 text-center rounded-full bg-black/80 py-0.5 text-[10px] text-white\">x{count}</span>\n                        </div>\n\n                        {/* Status Badge (Fixed width w-[48px]) */}\n                        <div className=\"w-[48px] flex justify-center\">\n                          {!isSide && (\n                            <span className=\"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider\">\n                              {t.canCustomize}\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Price (Fixed width w-[50px], Right Aligned) */}\n                        <div className=\"w-[50px] text-right\">\n                          <p className=\"font-bold text-gray-700\">${items.reduce((sum, i) => sum + i.totalPrice, 0)}</p>\n                        </div>\n\n                        {/* Action Button (Fixed width w-[32px] for click target) */}\n                        <div className=\"w-[32px] flex justify-end\">\n                          {isNoCustom ? (\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                removeFromCart(items[items.length - 1].internalId);\n                              }}\n                              className=\"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\"\n                            >\n                              <Trash2 size={24} />\n                            </button>\n                          ) : (\n                            // Spacer to reserve space for the delete button seen in single items\n                            <div className=\"w-[32px]\" />\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Expanded Items */}\n                    {isExpanded && (\n                      <div className=\"border-t border-gray-100 bg-gray-50/50 p-2 space-y-2\">\n                        {items.map((item, idx) => {\n                          const product = products.find(p => p.id === item.productId);\n                          const isSide = product?.category_id === 'cat_sides' || product?.category_id === 'cat_drinks' || false;\n                          const displayName = lang === 'en' ? (item.nameEn || item.name) : item.name;\n\n                          return (\n                            <div\n                              key={item.internalId}\n                              onClick={isSide ? undefined : () => openModifierModal(item)}\n                              className={clsx(\n                                \"flex items-center justify-between rounded-r-md bg-white/50 p-3 shadow-none border-l-[4px] border-gray-100 hover:bg-white ml-6 transition-all\",\n                                !isSide && \"cursor-pointer\",\n                                !isSide && groupColor.replace('text-', 'border-').split(' ')[0] // Apply theme color to left border\n                              )}\n                            >\n                              <div className=\"flex-1 min-w-0 pr-2\">\n                                <div className=\"flex items-center gap-2\">\n                                  <span className={clsx(\"font-serif font-bold text-lg opacity-40 w-8 text-center flex-shrink-0\")}>{toRoman(idx + 1)}.</span>\n                                  {!isSide ? (\n                                    <span className={clsx(\"font-medium text-md\", item.modifierIds.length > 0 ? \"text-gray-800\" : \"text-gray-500\")}>\n                                      {item.modifierIds.length > 0 ? t.customization : displayName}\n                                    </span>\n                                  ) : (\n                                    <span className=\"text-gray-500 font-medium\">{lang === 'en' ? 'Standard' : 'æ¨™æº–'} (500cc)</span>\n                                  )}\n                                </div>\n                                {!isSide ? (\n                                  item.modifierIds.length > 0 ? (\n                                    <p className=\"text-sm text-blue-600 mt-1 truncate pl-[42px]\">\n                                      {item.modifierIds.map(mid => {\n                                        const m = MODIFIERS.find(mod => mod.id === mid);\n                                        return m ? (lang === 'en' ? (m.nameEn || m.name) : m.name) : '';\n                                      }).join(', ')}\n                                    </p>\n                                  ) : (\n                                    <p className=\"text-xs text-gray-400 mt-0.5 pl-[42px]\">{t.noNotes}</p>\n                                  )\n                                ) : (\n                                  <p className=\"text-sm text-gray-400 mt-1 pl-[42px]\">{lang === 'en' ? 'No Add-ons' : 'ç„¡å®¢è£½åŒ–'}</p>\n                                )}\n\n                              </div>\n                              <div className=\"flex items-center gap-3 flex-shrink-0\">\n                                <span className=\"text-sm font-medium\">${item.totalPrice}</span>\n                                <button\n                                  onClick={(e) => { e.stopPropagation(); removeFromCart(item.internalId); }}\n                                  className=\"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\"\n                                >\n                                  <Trash2 size={24} />\n                                </button>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )\n                    }\n                  </div>\n                );\n              })\n            ) : (\n              // --- NOT GROUPED MODE (FLAT LIST) ---\n              cart.map((item) => {\n                // Color map\n                let cartItemColor = 'bg-white border-gray-100 hover:border-blue-300';\n                if (item.type === 'meat') cartItemColor = 'bg-red-50 border-red-100 hover:border-red-300 text-red-900';\n                if (item.type === 'seafood') cartItemColor = 'bg-blue-50 border-blue-100 hover:border-blue-300 text-blue-900';\n                if (item.type === 'cheese') cartItemColor = 'bg-yellow-50 border-yellow-100 hover:border-yellow-300 text-yellow-900';\n                if (item.type === 'special') cartItemColor = 'bg-purple-50 border-purple-100 hover:border-purple-300 text-purple-900';\n\n                // Logic for numbering (#I, #II) same as flat approach\n                const sameProductItems = cart.filter(c => c.productId === item.productId);\n                const myIndex = sameProductItems.findIndex(c => c.internalId === item.internalId);\n                const showIndex = sameProductItems.length > 1;\n\n                const displayName = lang === 'en' ? (item.nameEn || item.name) : item.name;\n                const product = products.find(p => p.id === item.productId);\n                const isSide = product?.category_id === 'cat_sides' || product?.category_id === 'cat_drinks' || false;\n\n                return (\n                  <div\n                    key={item.internalId}\n                    onClick={() => openModifierModal(item)}\n                    className={clsx(\n                      \"group relative flex items-center p-2 shadow-sm border-2 transition-all\",\n                      \"cursor-pointer\", // Always cursor-pointer in flat list as individual items are editable\n                      cartItemColor\n                    )}\n                  >\n                    {/* Zone 1: Expansion Icon / Spacer (Fixed width w-6) */}\n                    <div className=\"w-6 flex-shrink-0 flex items-center justify-center\">\n                      {/* Empty in Flat List */}\n                    </div>\n\n                    {/* Zone 2: Product Name & Modifiers (Flex Fill) */}\n                    <div className=\"flex-1 min-w-0 pr-2\">\n                      <h3 className=\"text-[15px] font-bold leading-tight truncate\">{displayName}</h3>\n                      {item.modifierIds.length > 0 && (\n                        <p className=\"text-sm opacity-80 mt-1 truncate\">\n                          {item.modifierIds.map(mid => {\n                            const m = MODIFIERS.find(mod => mod.id === mid);\n                            return m ? (lang === 'en' ? (m.nameEn || m.name) : m.name) : null;\n                          }).filter(Boolean).join(', ')}\n                        </p>\n                      )}\n                    </div>\n\n                    {/* Zone 3: Right Cluster (Fixed Alignments) */}\n                    <div className=\"flex items-center gap-1 flex-shrink-0\">\n                      {/* Sub-Zone 3.1: Index / Spacer (Fixed width w-[28px]) */}\n                      <div className=\"w-[28px] flex justify-center\">\n                        {showIndex ? (\n                          <span className=\"flex-shrink-0 w-[28px] text-center rounded-md bg-black/5 py-0.5 text-[10px] font-bold opacity-80 font-serif\">\n                            {toRoman(myIndex + 1)}\n                          </span>\n                        ) : (\n                          // Explicit w-[28px] spacer when no index, to prevent jitter\n                          <div className=\"w-[28px]\" />\n                        )}\n                      </div>\n\n                      {/* Sub-Zone 3.2: Status Badge (Fixed width w-[48px]) */}\n                      <div className=\"w-[48px] flex justify-center\">\n                        {!isSide && (\n                          <span className=\"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider whitespace-nowrap\">\n                            {t.canCustomize}\n                          </span>\n                        )}\n                      </div>\n\n                      {/* Sub-Zone 3.3: Price (Fixed width w-[50px], Right Aligned) */}\n                      <div className=\"w-[50px] text-right\">\n                        <p className=\"text-md font-medium\">${item.totalPrice}</p>\n                      </div>\n\n                      {/* Sub-Zone 3.4: Action Button (Fixed width w-[32px]) */}\n                      <div className=\"w-[32px] flex justify-end\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            removeFromCart(item.internalId);\n                          }}\n                          className={clsx(\n                            \"flex-shrink-0 rounded-full p-2 transition-colors\",\n                            \"text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100\"\n                          )}\n                        >\n                          <Trash2 size={24} />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })\n            )\n          )}\n        </div>\n\n        {/* Cart Footer / Checkout */}\n        <div className=\"border-t border-gray-200 bg-white p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] flex-shrink-0 flex items-center gap-3\">\n          <div className=\"flex flex-col items-start w-24 flex-shrink-0\">\n            <span className=\"text-sm text-gray-500 font-medium\">{t.total}</span>\n            <span className=\"text-2xl font-bold text-blue-600 truncate w-full\">${cartTotal}</span>\n          </div>\n\n          <button\n            onClick={openCheckoutModal}\n            className=\"flex-1 rounded-xl bg-blue-600 py-3 text-xl font-bold text-white shadow-lg transition-all hover:bg-blue-700 active:scale-95 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n            disabled={cart.length === 0}\n          >\n            {t.checkout}\n          </button>\n        </div>\n      </div>\n\n    </div >\n  );\n}\n"],"names":[],"mappings":"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"}
./.next/static/chunks/f21f37c29aa2cfed.js:è¨‚å–®å·²é€å‡ºï¼`),I([])},lang:en}),(0,t.jsxs)("div",{className:(0,h.clsx)("flex w-full flex-col border-b md:border-b-0 md:border-r border-gray-300 bg-white transition-all duration-300","dashboard"===C?"md:w-full h-full":"md:w-[60%] lg:w-[70%] md:h-full"),style:{height:"dashboard"===C?"100%":G?`${100-$}%`:"100%"},children:[(0,t.jsxs)("div",{className:"flex h-16 w-full items-center justify-between border-b border-gray-200 bg-gray-50 px-4 flex-shrink-0",children:[(0,t.jsxs)("div",{ref:el,className:"flex items-center gap-2 overflow-x-auto scrollbar-hide snap-x snap-mandatory touch-pan-x",children:[(0,t.jsx)("button",{onClick:()=>D("pos"===C?"dashboard":"pos"),className:(0,h.clsx)("flex-shrink-0 rounded-full px-6 py-2 text-lg font-bold transition-all border-2 mb-0 snap-start select-none","dashboard"===C?"bg-purple-600 text-white border-purple-600 shadow-md":"bg-white text-purple-600 border-purple-200 hover:bg-purple-50"),children:"en"===en?"back to POS":"dashboard"===C?"â¬… å›žé»žé¤":"ðŸ“Š ç®¡ç†å¾Œå°"}),(0,t.jsx)("div",{className:"w-px h-8 bg-gray-300 mx-1 flex-shrink-0 snap-start"}),"pos"===C?(0,t.jsx)(g.Reorder.Group,{axis:"x",values:Z,onReorder:ee,className:"flex gap-2",children:Z.map(r=>(0,t.jsx)(g.Reorder.Item,{value:r,as:"div",className:"flex-shrink-0 snap-start",children:(0,t.jsx)("button",{onClick:()=>{S(r.id),D("pos")},className:(0,h.clsx)("rounded-full px-6 py-2 text-lg font-bold transition-all select-none","pos"===C&&e===r.id?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"),children:"en"===en?r.nameEn:r.name})},r.id))}):(0,t.jsxs)("div",{className:"flex bg-gray-200/50 p-1 rounded-full",children:[(0,t.jsx)("button",{onClick:()=>E("report"),className:(0,h.clsx)("px-4 py-1.5 rounded-full text-sm font-bold transition-all","report"===M?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"en"===en?"Sales Report":"ç‡Ÿæ”¶å ±è¡¨"}),(0,t.jsx)("button",{onClick:()=>E("menu"),className:(0,h.clsx)("px-4 py-1.5 rounded-full text-sm font-bold transition-all","menu"===M?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"en"===en?"Menu Setup":"èœå–®ç®¡ç†"})]}),"dashboard"===C&&"report"===M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-px h-8 bg-gray-300 mx-1 flex-shrink-0"}),(0,t.jsxs)("button",{onClick:()=>{e_(null),eP("cogs"),eO(!0)},className:"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-red-200 bg-white text-red-600 hover:bg-red-50 hover:border-red-300 flex items-center gap-1",children:[(0,t.jsx)(x.TrendingDown,{size:16}),"en"===en?"Purchase":"é€²è²¨"]}),(0,t.jsxs)("button",{onClick:()=>{e_(null),eP("opex"),eO(!0)},className:"flex-shrink-0 rounded-full px-4 py-1.5 text-sm font-bold transition-all border-2 border-yellow-200 bg-white text-yellow-600 hover:bg-yellow-50 hover:border-yellow-300 flex items-center gap-1",children:[(0,t.jsx)(m.DollarSign,{size:16}),"en"===en?"Expense":"è²»ç”¨"]})]})]}),(0,t.jsxs)("button",{onClick:()=>ei("zh"===en?"en":"zh"),className:"flex flex-shrink-0 items-center gap-1 rounded-full border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium hover:bg-gray-50 text-gray-700 ml-2",children:[(0,t.jsx)(o.Globe,{size:16}),(0,t.jsx)("span",{children:"zh"===en?"English":"ä¸­æ–‡"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:"dashboard"===C?(0,t.jsx)("div",{className:"max-w-5xl mx-auto",children:"menu"===M?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-gray-400 bg-white rounded-2xl border-2 border-dashed border-gray-200",children:[(0,t.jsx)("p",{className:"font-bold",children:"Please go to /dashboard for Menu Management"}),(0,t.jsx)("p",{className:"text-sm",children:"è«‹å‰å¾€ç®¡ç†å¾Œå°é€²è¡Œèœå–®è¨­å®š"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["en"===en?"Sales Report":"ç‡Ÿæ”¶å ±è¡¨",(0,t.jsx)("span",{className:"text-base font-normal text-gray-500 ml-3 bg-gray-100 px-3 py-1 rounded-full",children:"en"===en?`${ex.toLocaleDateString()} ~ ${em.toLocaleDateString()}`:`${ex.getFullYear()}/${ex.getMonth()+1}/${ex.getDate()} ~ ${em.getFullYear()}/${em.getMonth()+1}/${em.getDate()}`})]}),(0,t.jsxs)("div",{className:"relative flex flex-col gap-2 items-end",children:[(0,t.jsx)("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:["day","month","quarter","year","custom"].map(e=>(0,t.jsx)("button",{onClick:()=>{A(e),"custom"===e&&U(!0)},className:(0,h.clsx)("px-4 py-1.5 rounded-md text-sm font-medium transition-all",q===e?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-500 hover:bg-gray-50"),children:"en"===en?"day"===e?"Today":"month"===e?"Month":"quarter"===e?"Quarter":"year"===e?"Year":"Custom":"day"===e?"æœ¬æ—¥":"month"===e?"æœ¬æœˆ":"quarter"===e?"æœ¬å­£":"year"===e?"æœ¬å¹´":"è‡ªé¸"},e))}),"custom"===q&&B&&(0,t.jsxs)("div",{className:"absolute top-10 right-0 z-30 flex flex-col gap-3 bg-white p-4 rounded-xl shadow-xl border border-gray-200 animate-in fade-in zoom-in-95 origin-top-right w-64 md:w-72",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center border-b pb-2 mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-gray-700 text-sm",children:"en"===en?"Select Range":"é¸æ“‡æ—¥æœŸç¯„åœ"}),(0,t.jsx)("button",{onClick:()=>U(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(p.X,{size:16,className:"text-gray-400"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"date",value:V,onChange:e=>W(e.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 from-input"}),(0,t.jsx)("span",{className:"text-gray-400",children:"~"}),(0,t.jsx)("input",{type:"date",value:K,onChange:e=>{Q(e.target.value),e.target.value&&U(!1)},className:"flex-1 border border-gray-300 rounded px-2 py-1.5 text-sm outline-none focus:border-purple-500 bg-gray-50 to-input"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-blue-500 border-gray-100",children:[(0,t.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,t.jsx)(c.TrendingUp,{size:16,className:"text-blue-500"}),"en"===en?"Revenue":"ç¸½ç‡Ÿæ”¶ (Sales)"]}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:["$",eg]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[eb," ","en"===en?"orders":"ç­†è¨‚å–®"]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-red-500 border-gray-100",children:[(0,t.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,t.jsx)(x.TrendingDown,{size:16,className:"text-red-500"}),"en"===en?"COGS":"é€²è²¨æˆæœ¬ (COGS)"]}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["-$",ef]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[eh.filter(e=>"cogs"===e.type).length," ","en"===en?"entries":"ç­†ç´€éŒ„"]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border-l-4 border-l-yellow-500 border-gray-100",children:[(0,t.jsxs)("p",{className:"text-gray-500 font-medium mb-1 flex items-center gap-1",children:[(0,t.jsx)(m.DollarSign,{size:16,className:"text-yellow-500"}),"en"===en?"Expenses":"ç‡Ÿæ¥­è²»ç”¨ (OpEx)"]}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-yellow-600",children:["-$",ey]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[eh.filter(e=>"opex"===e.type).length," ","en"===en?"items":"ç­†ç´€éŒ„"]})]}),(0,t.jsxs)("div",{className:(0,h.clsx)("p-6 rounded-2xl shadow-md border-l-4 border-gray-100",eN>=0?"bg-green-50 border-l-green-500":"bg-red-50 border-l-red-500"),children:[(0,t.jsxs)("p",{className:"text-gray-600 font-bold mb-1 flex items-center gap-1",children:["ðŸŽ‰ ","en"===en?"Net Profit":"æ·¨åˆ© (Net Profit)"]}),(0,t.jsxs)("p",{className:(0,h.clsx)("text-3xl font-extrabold break-all",eN>=0?"text-green-700":"text-red-700"),children:["$",eN.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-sm opacity-60 mt-1 font-medium",children:["en"===en?"Margin":"æ·¨åˆ©çŽ‡",": ",eg>0?Math.round(eN/eg*100):0,"%"]})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(j.default,{orders:ep,expenses:eh,startDate:ex,endDate:em,period:q,lang:en})}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 border-b pb-2 flex justify-between items-center",children:["en"===en?"Expense History":"æ”¯å‡ºç´€éŒ„æ˜Žç´°",(0,t.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["Total: -$",ej]})]}),(0,t.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:0===eh.length?(0,t.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===en?"No expenses recorded.":"å°šç„¡æ”¯å‡ºç´€éŒ„"}):eh.sort((e,t)=>t.timestamp-e.timestamp).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:(0,h.clsx)("px-2 py-1 rounded text-xs font-bold uppercase w-16 text-center","cogs"===e.type?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"cogs"===e.type?"COGS":"OpEx"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-800",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString("zh"===en?"zh-TW":"en-US",{hour12:!1})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"font-bold text-gray-700",children:["-$",e.amount]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{e_(e.id),eP(e.type),eO(!0)},className:"p-1.5 rounded-full hover:bg-gray-200 text-gray-500 transition-colors",children:(0,t.jsx)(u.Pencil,{size:18})}),(0,t.jsx)("button",{onClick:()=>(e=>{if(!confirm("en"===en?"Delete this expense?":"ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—Žï¼Ÿ"))return;let t=T.filter(t=>t.id!==e);P(t),localStorage.setItem("expenses",JSON.stringify(t))})(e.id),className:"p-1.5 rounded-full hover:bg-red-100 text-red-500 transition-colors",children:(0,t.jsx)(a.Trash2,{size:18})})]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4 border-b pb-2",children:"en"===en?"Product Sales":"ç†±éŠ·å•†å“çµ±è¨ˆ"}),(0,t.jsx)("div",{className:"space-y-3",children:0===Object.keys(ev).length?(0,t.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===en?"No sales yet today.":"å°šç„¡éŠ·å”®è³‡æ–™"}):Object.entries(ev).sort(([,e],[,t])=>t-e).map(([e,r])=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:e}),(0,t.jsxs)("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold",children:["x ",r]})]},e))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6 border-b pb-2",children:"en"===en?"Hourly Sales (Peak Times)":"ç†±éŠ·æ™‚æ®µåˆ†æž"}),0===Object.keys(ew).length?(0,t.jsx)("p",{className:"text-gray-400 text-center py-4",children:"en"===en?"No sales yet today.":"å°šç„¡æ™‚æ®µè³‡æ–™"}):(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(ew).sort(([e],[t])=>parseInt(e)-parseInt(t)).map(([e,r])=>{let s=parseInt(e),a=`${s}:00 - ${s+1}:00`,l=r.revenue/eS*100,n=Object.entries(r.products).sort(([,e],[,t])=>t-e).slice(0,3);return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsx)("span",{className:"font-bold text-gray-700 w-32",children:a}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,t.jsxs)("span",{className:"text-blue-600 font-bold",children:["$",r.revenue]}),(0,t.jsxs)("span",{className:"text-gray-500",children:[r.count," ","en"===en?"orders":"å–®"]})]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2.5 mb-1 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${l}%`}})}),(0,t.jsx)("div",{className:"pl-2 border-l-2 border-gray-200 ml-1",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:n.map(([e,r])=>(0,t.jsxs)("span",{className:"text-xs bg-orange-50 text-orange-800 px-2 py-0.5 rounded border border-orange-100",children:[e," ",(0,t.jsxs)("span",{className:"font-bold opacity-70",children:["x",r]})]},e))})})]},s)})})]}),(0,t.jsxs)("div",{className:"text-center pt-8",children:[(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),window.confirm("en"===en?"Clear all history?":"ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„å—Žï¼Ÿ(ç„¡æ³•å¾©åŽŸ)")&&(localStorage.removeItem("dailyOrders"),localStorage.removeItem("expenses"),O([]),P([]),alert("en"===en?"Data cleared successfully":"è³‡æ–™å·²å…¨éƒ¨æ¸…é™¤ï¼"))},className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:"en"===en?"Reset Data":"æ¸…é™¤æ‰€æœ‰è³‡æ–™"}),(0,t.jsx)("button",{type:"button",disabled:R,onClick:async()=>{confirm("en"===en?"Generate smart profit data?":"ç¢ºå®šè¦ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€æ¸¬è©¦è³‡æ–™å—Žï¼Ÿ\n(é€™æœƒæ¨¡æ“¬çœŸå¯¦ç¶“ç‡Ÿï¼šæˆæœ¬ç´„ä½”ç‡Ÿæ”¶ 35%ï¼Œä¸¦ç”¢ç”Ÿæ¯æœˆå›ºå®šé–‹éŠ·)")&&(F(!0),setTimeout(()=>{let e=[],t=[],r=new Date;for(let s=365;s>=0;s--){let a=new Date(r);a.setDate(a.getDate()-s);let l=a.toLocaleDateString(),n=a.getDate(),i=[0,5,6].includes(a.getDay())?Math.floor(8*Math.random())+5:Math.floor(5*Math.random())+2,d=0;for(let t=0;t<i;t++){let t=Math.floor(3*Math.random())+1,r=[],s=0;for(let e=0;e<t;e++){let e=et[Math.floor(Math.random()*et.length)];e&&(r.push({internalId:Math.random().toString().slice(2,8),productId:e.id,name:e.name,nameEn:e.nameEn,basePrice:e.price,modifierIds:[],totalPrice:e.price,type:e.type}),s+=e.price)}e.push({id:Math.random().toString().slice(2,8),items:r,total:s,date:l,timestamp:a.getTime()+1e4*Math.random(),paymentMethod:Math.random()>.4?"cash":"linepay"}),d+=s}if(d>0){let e=Math.floor(d*(.3+.1*Math.random()));t.push({id:Math.random().toString().slice(2,8),type:"cogs",name:`æœ¬æ—¥é£ŸææŽ¡è³¼ (${l})`,amount:e,date:l,timestamp:a.getTime()})}1===n&&t.push({id:Math.random().toString().slice(2,8),type:"opex",name:"åº—é¢ç§Ÿé‡‘",amount:15e3,date:l,timestamp:a.getTime()}),15===n&&t.push({id:Math.random().toString().slice(2,8),type:"opex",name:"æ°´é›»ç“¦æ–¯è²»",amount:3500,date:l,timestamp:a.getTime()})}let s=[...z,...e],a=[...T,...t];O(s),P(a);try{localStorage.setItem("dailyOrders",JSON.stringify(s)),localStorage.setItem("expenses",JSON.stringify(a)),alert("en"===en?"Success! Smart Profit Data Generated.":"æˆåŠŸï¼å·²ç”Ÿæˆã€Œç²åˆ©æ¨¡å¼ã€è³‡æ–™ ðŸ“ˆ\n\n- è¨‚å–®ï¼šéš¨æ©Ÿåˆ†ä½ˆ (é€±æœ«è¼ƒå¤š)\n- æˆæœ¬ï¼šè‡ªå‹•è¨­ç‚ºç‡Ÿæ”¶çš„ 30%~40%\n- æ”¯å‡ºï¼šæ¯æœˆå›ºå®šç§Ÿé‡‘/æ°´é›»")}catch(e){alert("Storage Quota Exceeded!"),console.error(e)}finally{F(!1)}},50))},className:(0,h.clsx)("text-sm hover:underline ml-4",R?"text-gray-400 cursor-not-allowed":"text-blue-500 hover:text-blue-700"),children:R?"en"===en?"Generating...":"ç”Ÿæˆä¸­...":"en"===en?"Generate Profit Data":"ç”Ÿæˆç²åˆ©æ¸¬è©¦è³‡æ–™"})]})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4 md:hidden",children:et.filter(t=>t.category_id===e).sort((e,t)=>{let r={meat:1,seafood:2,cheese:3,special:4,side:5,addon:6,drink:7};return(r[e.type]||99)-(r[t.type]||99)}).map(e=>(0,t.jsx)(w,{product:e,addToCart:eq,lang:en},e.id))}),(0,t.jsx)("div",{className:"hidden md:block space-y-8",children:["meat","seafood","cheese","special","side","addon","drink"].map(r=>{let s=et.filter(t=>t.category_id===e&&t.type===r);return 0===s.length?null:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(e=>(0,t.jsx)(w,{product:e,addToCart:eq,lang:en},e.id))}),(0,t.jsx)("div",{className:"h-px bg-gray-200 w-full"})]},r)})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col bg-gray-50 transition-all duration-300 w-full md:w-[40%] lg:w-[35%] md:h-full border-t md:border-t-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] md:shadow-none",style:{height:"dashboard"===C?"0px":G?`${$}%`:"100%",display:"dashboard"===C?"none":"flex"},children:[(0,t.jsx)("div",{className:"h-6 w-full bg-white border-t border-gray-200 flex items-center justify-center cursor-grab md:hidden flex-shrink-0 touch-none hover:bg-gray-50 active:bg-gray-100 transition-colors",onTouchStart:e=>{L.current=e.touches[0].clientY},onTouchMove:e=>{if(null===L.current)return;let t=e.touches[0].clientY,r=L.current-t;r>50&&40===$&&(_(70),L.current=null),r<-50&&70===$&&(_(40),L.current=null)},onMouseDown:e=>{H.current=!0,L.current=e.clientY,document.body.style.cursor="grabbing"},children:(0,t.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-gray-200 px-4 shadow-sm bg-white flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:ed.cartTitle}),(0,t.jsxs)("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-sm font-bold text-blue-800",children:[k.length," ",ed.items]})]}),(0,t.jsxs)("button",{onClick:()=>eI(!ek),className:"flex items-center gap-1 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-200 transition-colors",children:[ek?(0,t.jsx)(i.Layers,{size:16}):(0,t.jsx)(d.List,{size:16}),(0,t.jsx)("span",{children:ek?ed.grouping:ed.noGrouping})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===k.length?(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-gray-400 opacity-50",children:[(0,t.jsx)("span",{className:"text-6xl",children:"ðŸ›’"}),(0,t.jsx)("p",{className:"mt-4 text-lg",children:ed.emptyCartTitle})]}):ek?eV.map(e=>{let r=eU[e],s=r[0],i=r.length,d=eC.includes(e),o="border-gray-100 hover:border-blue-300",c="bg-white";"meat"===s.type&&(o="border-red-100 hover:border-red-300 text-red-900",c="bg-red-50"),"seafood"===s.type&&(o="border-blue-100 hover:border-blue-300 text-blue-900",c="bg-blue-50"),"cheese"===s.type&&(o="border-yellow-100 hover:border-yellow-300 text-yellow-900",c="bg-yellow-50"),"special"===s.type&&(o="border-purple-100 hover:border-purple-300 text-purple-900",c="bg-purple-50");let x="en"===en&&s.nameEn||s.name,m=et.find(e=>e.id===s.productId),u=m?.category_id==="cat_sides"||m?.category_id==="cat_drinks";if(1===i){let e=et.find(e=>e.id===s.productId),r=e?.category_id==="cat_sides"||e?.category_id==="cat_drinks";return(0,t.jsxs)("div",{onClick:r?void 0:()=>eW(s),className:(0,h.clsx)("group relative flex items-center p-2 shadow-sm border-2 transition-all",!r&&"cursor-pointer",c,o),children:[(0,t.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsx)("h3",{className:"text-[15px] font-bold leading-tight truncate",children:x}),s.modifierIds.length>0&&(0,t.jsx)("p",{className:"text-sm opacity-80 mt-1 truncate",children:s.modifierIds.map(e=>{let t=MODIFIERS.find(t=>t.id===e);return t?"en"===en&&t.nameEn||t.name:null}).filter(Boolean).join(", ")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,t.jsx)("div",{className:"w-[28px] flex justify-center"}),(0,t.jsx)("div",{className:"w-[48px] flex justify-center",children:!r&&(0,t.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider",children:ed.canCustomize})}),(0,t.jsx)("div",{className:"w-[50px] text-right",children:(0,t.jsxs)("p",{className:"text-md font-medium",children:["$",s.totalPrice]})}),(0,t.jsx)("div",{className:"w-[32px] flex justify-end",children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),eB(s.internalId)},className:(0,h.clsx)("flex-shrink-0 rounded-full p-2 transition-colors","text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100"),children:(0,t.jsx)(a.Trash2,{size:24})})})]})]},s.internalId)}return(0,t.jsxs)("div",{className:"rounded-lg shadow-sm overflow-hidden border border-gray-200 bg-white",children:[(0,t.jsxs)("div",{onClick:()=>!u&&void(eC.includes(e)?eD(eC.filter(t=>t!==e)):eD([...eC,e])),className:(0,h.clsx)("flex items-center p-2 transition-colors",!u&&"cursor-pointer",c),children:[(0,t.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center",children:u?(0,t.jsx)("div",{className:"w-[20px]"}):d?(0,t.jsx)(l.ChevronDown,{size:20}):(0,t.jsx)(n.ChevronRight,{size:20})}),(0,t.jsx)("div",{className:"flex-1 min-w-0 pr-2",children:(0,t.jsx)("h3",{className:(0,h.clsx)("text-[15px] font-bold leading-tight truncate",o.split(" ").find(e=>e.startsWith("text-"))||"text-gray-800"),children:x})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,t.jsx)("div",{className:"w-[28px] flex justify-center",children:(0,t.jsxs)("span",{className:"flex-shrink-0 w-8 text-center rounded-full bg-black/80 py-0.5 text-[10px] text-white",children:["x",i]})}),(0,t.jsx)("div",{className:"w-[48px] flex justify-center",children:!u&&(0,t.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider",children:ed.canCustomize})}),(0,t.jsx)("div",{className:"w-[50px] text-right",children:(0,t.jsxs)("p",{className:"font-bold text-gray-700",children:["$",r.reduce((e,t)=>e+t.totalPrice,0)]})}),(0,t.jsx)("div",{className:"w-[32px] flex justify-end",children:u?(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),eB(r[r.length-1].internalId)},className:"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors",children:(0,t.jsx)(a.Trash2,{size:24})}):(0,t.jsx)("div",{className:"w-[32px]"})})]})]}),d&&(0,t.jsx)("div",{className:"border-t border-gray-100 bg-gray-50/50 p-2 space-y-2",children:r.map((e,r)=>{let s=et.find(t=>t.id===e.productId),l=s?.category_id==="cat_sides"||s?.category_id==="cat_drinks",n="en"===en&&e.nameEn||e.name;return(0,t.jsxs)("div",{onClick:l?void 0:()=>eW(e),className:(0,h.clsx)("flex items-center justify-between rounded-r-md bg-white/50 p-3 shadow-none border-l-[4px] border-gray-100 hover:bg-white ml-6 transition-all",!l&&"cursor-pointer",!l&&o.replace("text-","border-").split(" ")[0]),children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:(0,h.clsx)("font-serif font-bold text-lg opacity-40 w-8 text-center flex-shrink-0"),children:[N(r+1),"."]}),l?(0,t.jsxs)("span",{className:"text-gray-500 font-medium",children:["en"===en?"Standard":"æ¨™æº–"," (500cc)"]}):(0,t.jsx)("span",{className:(0,h.clsx)("font-medium text-md",e.modifierIds.length>0?"text-gray-800":"text-gray-500"),children:e.modifierIds.length>0?ed.customization:n})]}),l?(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1 pl-[42px]",children:"en"===en?"No Add-ons":"ç„¡å®¢è£½åŒ–"}):e.modifierIds.length>0?(0,t.jsx)("p",{className:"text-sm text-blue-600 mt-1 truncate pl-[42px]",children:e.modifierIds.map(e=>{let t=MODIFIERS.find(t=>t.id===e);return t?"en"===en&&t.nameEn||t.name:""}).join(", ")}):(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-0.5 pl-[42px]",children:ed.noNotes})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["$",e.totalPrice]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),eB(e.internalId)},className:"rounded-full p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors",children:(0,t.jsx)(a.Trash2,{size:24})})]})]},e.internalId)})})]},e)}):k.map(e=>{let r="bg-white border-gray-100 hover:border-blue-300";"meat"===e.type&&(r="bg-red-50 border-red-100 hover:border-red-300 text-red-900"),"seafood"===e.type&&(r="bg-blue-50 border-blue-100 hover:border-blue-300 text-blue-900"),"cheese"===e.type&&(r="bg-yellow-50 border-yellow-100 hover:border-yellow-300 text-yellow-900"),"special"===e.type&&(r="bg-purple-50 border-purple-100 hover:border-purple-300 text-purple-900");let s=k.filter(t=>t.productId===e.productId),l=s.findIndex(t=>t.internalId===e.internalId),n=s.length>1,i="en"===en&&e.nameEn||e.name,d=et.find(t=>t.id===e.productId),o=d?.category_id==="cat_sides"||d?.category_id==="cat_drinks";return(0,t.jsxs)("div",{onClick:()=>eW(e),className:(0,h.clsx)("group relative flex items-center p-2 shadow-sm border-2 transition-all","cursor-pointer",r),children:[(0,t.jsx)("div",{className:"w-6 flex-shrink-0 flex items-center justify-center"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsx)("h3",{className:"text-[15px] font-bold leading-tight truncate",children:i}),e.modifierIds.length>0&&(0,t.jsx)("p",{className:"text-sm opacity-80 mt-1 truncate",children:e.modifierIds.map(e=>{let t=MODIFIERS.find(t=>t.id===e);return t?"en"===en&&t.nameEn||t.name:null}).filter(Boolean).join(", ")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,t.jsx)("div",{className:"w-[28px] flex justify-center",children:n?(0,t.jsx)("span",{className:"flex-shrink-0 w-[28px] text-center rounded-md bg-black/5 py-0.5 text-[10px] font-bold opacity-80 font-serif",children:N(l+1)}):(0,t.jsx)("div",{className:"w-[28px]"})}),(0,t.jsx)("div",{className:"w-[48px] flex justify-center",children:!o&&(0,t.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-[10px] font-bold text-blue-600 ring-1 ring-inset ring-blue-500/20 uppercase tracking-wider whitespace-nowrap",children:ed.canCustomize})}),(0,t.jsx)("div",{className:"w-[50px] text-right",children:(0,t.jsxs)("p",{className:"text-md font-medium",children:["$",e.totalPrice]})}),(0,t.jsx)("div",{className:"w-[32px] flex justify-end",children:(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),eB(e.internalId)},className:(0,h.clsx)("flex-shrink-0 rounded-full p-2 transition-colors","text-gray-400 hover:text-red-600 hover:bg-black/5 active:bg-red-100"),children:(0,t.jsx)(a.Trash2,{size:24})})})]})]},e.internalId)})}),(0,t.jsxs)("div",{className:"border-t border-gray-200 bg-white p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] flex-shrink-0 flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start w-24 flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:ed.total}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-blue-600 truncate w-full",children:["$",eQ]})]}),(0,t.jsx)("button",{onClick:()=>{0!==k.length&&X(!0)},className:"flex-1 rounded-xl bg-blue-600 py-3 text-xl font-bold text-white shadow-lg transition-all hover:bg-blue-700 active:scale-95 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:0===k.length,children:ed.checkout})]})]})]})}e.s(["default",()=>S])}]);
